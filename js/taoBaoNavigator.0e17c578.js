webpackJsonp([4],{0:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(52);n.FONT_FAMILY="Roboto, Helvetica, arial, sans-serif",n.ACTIVATE_TAOBAO_PRODUCT_FROM_SB="ACTIVATE_TAOBAO_PRODUCT_FROM_SB",n.FETCH_TAOBAO_PRODUCT_CASHBACK_STATUS_SUCCESS="FETCH_TAOBAO_PRODUCT_CASHBACK_STATUS_SUCCESS",n.FETCH_TAOBAO_PRODUCT_CASHBACK_STATUS_ERROR="FETCH_TAOBAO_PRODUCT_CASHBACK_STATUS_ERROR",n.FETCH_TAOBAO_PRODUCT_CASHBACK_STATUS="FETCH_TAOBAO_PRODUCT_CASHBACK_STATUS",n.FETCH_TAOBAO_PRODUCT_DEEP_LINK_ERROR="FETCH_TAOBAO_PRODUCT_DEEP_LINK_ERROR",n.DETECT_STAND_DOWN_AFFILIATE_NETWORK="DETECT_STAND_DOWN_AFFILIATE_NETWORK",n.DETACH_STAND_DOWN_AFFILIATE_NETWORK="DETACH_STAND_DOWN_AFFILIATE_NETWORK",n.CLOSE_ACTIVATED_MERCHANT_NOTIFIER="CLOSE_ACTIVATED_MERCHANT_NOTIFIER",n.DELETE_EXPIRED_ACTIVATED_MERCHANT="DELETE_EXPIRED_ACTIVATED_MERCHANT",n.VISIT_ACTIVATED_MERCHANT_NOTIFIER="VISIT_ACTIVATED_MERCHANT_NOTIFIER",n.GET_EXTENSION_SETTINGS_SUCCEESS="GET_EXTENSION_SETTINGS_SUCCEESS",n.t="ps",n.START_ACTIVATE_TAOBAO_PRODUCT="START_ACTIVATE_TAOBAO_PRODUCT",n.STAND_DOWN_MERCHANT_NOTIFIER="STAND_DOWN_MERCHANT_NOTIFIER",n.FETCH_TOP_MERCHANTS_SUCCESS="FETCH_TOP_MERCHANTS_SUCCESS",n.CLEAR_DIRTY_LOGIN_FROM_MENU="CLEAR_DIRTY_LOGIN_FROM_MENU",n.STAND_UP_MERCHANT_NOTIFIER="STAND_UP_MERCHANT_NOTIFIER",n.FETCH_TAOBAO_PRODUCT_ERROR="FETCH_TAOBAO_PRODUCT_ERROR",n.CAPTURE_MERCHANT_PAGE_HTML="CAPTURE_MERCHANT_PAGE_HTML",n.OPEN_BROWESER_SETTING_PAGE="OPEN_BROWESER_SETTING_PAGE",n.DEACTIVATE_TAOBAO_PRODUCT="DEACTIVATE_TAOBAO_PRODUCT",n.FETCH_TOP_MERCHANTS_ERROR="FETCH_TOP_MERCHANTS_ERROR",n.REFETCH_MERCHANTS_SUCCESS="REFETCH_MERCHANTS_SUCCESS",n.n="ll",n.r="pwd",n.DETECCT_PERMISSION_CHANGE="DETECCT_PERMISSION_CHANGE",n.CLOSE_PERMISSION_NOTIFIER="CLOSE_PERMISSION_NOTIFIER",n.RESET_PERMISSION_NOTIFIER="RESET_PERMISSION_NOTIFIER",n.CLEAN_INVALID_PERMISSION="CLEAN_INVALID_PERMISSION",n.CLOSE_MERCHANT_NOTIFIER="CLOSE_MERCHANT_NOTIFIER",n.FETCH_USER_INFO_SUCCESS="FETCH_USER_INFO_SUCCESS",n.FETCH_MERCHANTS_SUCCESS="FETCH_MERCHANTS_SUCCESS",n.SYNC_USER_FROM_SHOPBACK="SYNC_USER_FROM_SHOPBACK",n.DETECT_SB_REDIRECT_PAGE="DETECT_SB_REDIRECT_PAGE",n.OPEN_TAOBAO_SEARCH_BAR="OPEN_TAOBAO_SEARCH_BAR",n.e="cp",n.FETCH_MERCHANTS_ERROR="FETCH_MERCHANTS_ERROR",n.FETCH_USER_INFO_ERROR="FETCH_USER_INFO_ERROR",n.DIRTY_LOGIN_FROM_MENU="DIRTY_LOGIN_FROM_MENU",n.FETCH_SETTINGS_ERROR="FETCH_SETTINGS_ERROR",n.FETCH_TOP_MERCHANTS="FETCH_TOP_MERCHANTS",n.FETCH_DEALS_SUCCESS="FETCH_DEALS_SUCCESS",n.DEEP_LINK_REDIRECT="DEEP_LINK_REDIRECT",n.ADD_DIRTY_REDIRECT="ADD_DIRTY_REDIRECT",n.FETCH_DEALS_ERROR="FETCH_DEALS_ERROR",n.CLEAN_ACTIVATION="CLEAN_ACTIVATION",n.FETCH_CC_SUCCESS="FETCH_CC_SUCCESS",n.DROP_COOKIE_DONE="DROP_COOKIE_DONE",n.SET_COOKIE_DONE="SET_COOKIE_DONE",n.SET_COOKIE_FAIL="SET_COOKIE_FAIL",n.o="netstat",n.DISABLE_TRACKING="DISABLE_TRACKING",n.ENABLE_TRACKING="ENABLE_TRACKING",n.TOGGLE_TRACKING="TOGGLE_TRACKING",n.FETCH_USER_INFO="FETCH_USER_INFO",n.FETCH_CC_ERROR="FETCH_CC_ERROR",n.START_ACTIVATE="START_ACTIVATE",n.GEN_SB_EXT_ID="GEN_SB_EXT_ID",n.OPEN_POPUP_UI="OPEN_POPUP_UI",n.LOGIN_NOT_OK="LOGIN_NOT_OK",n.FETCH_DEALS="FETCH_DEALS",n.SWITCH_USER="SWITCH_USER",n.DE_ACTIVATE="DE_ACTIVATE",n.u="mv",n.API_ERROR="API_ERROR",n.LOGIN_OK="LOGIN_OK",n.LOGOUT="LOGOUT",n.OPEN_NEW_TAB="OPEN_NEW_TAB",n.CLOSE_TAB="CLOSE_TAB",n.REFRESH_ACCESS_TOKEN_SUCCESS="REFRESH_ACCESS_TOKEN_SUCCESS",n.TOGGLE_LOGGER="TOGGLE_LOGGER",n.EVENT_EXT_CLICK="EVENT_EXT_CLICK",n.EVENT_EXT_LOGIN="EVENT_EXT_LOGIN",n.EVENT_EXT_SEARCH="EVENT_EXT_SEARCH",n.EVENT_EXT_UPDATED="EVENT_EXT_UPDATED",n.EVENT_EXT_REDIRECT="EVENT_EXT_REDIRECT",n.EVENT_EXT_MENU_OPEN="EVENT_EXT_MENU_OPEN",n.EVENT_EXT_INSTALLED="EVENT_EXT_INSTALLED",n.EVENT_EXT_PAGE_VISITED="EVENT_EXT_PAGE_VISITED",n.EVENT_EXT_SERP_VISITED="EVENT_EXT_SERP_VISITED",n.EVENT_EXT_SERP_CLICKED="EVENT_EXT_SERP_CLICKED",n.EVENT_EXT_NOTIFIER_PROMPT="EVENT_EXT_NOTIFIER_PROMPT",n.EVENT_EXT_APPLY_COUPON_CODE="EVENT_EXT_APPLY_COUPON_CODE",n.EVENT_EXT_NOTIFIER_ACTIVATED_PROMPT="EVENT_EXT_NOTIFIER_ACTIVATED_PROMPT",n.EVENT_EXT_ERROR_OCCURED="EVENT_EXT_ERROR_OCCURED",n.EVENT_EXT_MANUAL_APPLY_COUPON_CODE="EVENT_EXT_MANUAL_APPLY_COUPON_CODE",n.DEFAULT_COUNTRY="COM",n.ACTIVATE_FROM_POPUP="ACTIVATE_FROM_POPUP",n.MENU_STORE="Menu Store",n.MENU_ACCOUNT_LOGIN="Menu_Account_Login",n.MENU_ACCOUNT_SWITCH_POPUP="Menu_Account_Country_Switch_Popup",n.POPUP_CUSTOM_LOGOUT_EVENT="LOGOUT",n.POPUP_CUSTOM_LOGIN_EVENT="LOGIN_DIRECTLY",n.POPUP_CUSTOM_LOGIN="NON_LOGIN_USER_TO_LOGIN",n.POPUP_CUSTOM_SEARCH_TAOBAO="CLICK_TO_SEARCH",n.POPUP_CUSTOM_ACTIVATE_EVENT="ACTIVATE_FROM_MENU",n.POPUP_CUSTOM_OPEN_COUNTRY_SELECTOR="OPEN_COUNTRY_SELECTOR",n.POPUP_CUSTOM_CHOOSE_COUNTRY="POPUP_CUSTOM_CHOOSE_COUNTRY",n.POPUP_CUSTOM_CHANGE_TAB_EVENT="TAB_CHANGE",n.POPUP_CUSTOM_GO_WITHDRAW="GO_TO_WITHDRAW",n.POPUP_CUSTOM_GO_OVERVIEW="GO_TO_OVERVIEW",n.POPUP_CUSTOM_GO_REFER="GO_TO_REFER",n.POPUP_CUSTOM_GO_FAQ="GO_TO_FAQ",n.POPUP_CUSTOM_GO_RATE="GO_TO_RATE",n.POPUP_CUSTOM_CANCEL_SWITCH="CANCEL_SWITCH",n.POPUP_CUSTOM_MENU_CAMPAIGN_PROMPT="POPUP_CUSTOM_MENU_CAMPAIGN_PROMPT",n.POPUP_CUSTOM_MENU_CAMPAIGN_CLOSE="POPUP_CUSTOM_MENU_CAMPAIGN_CLOSE",n.POPUP_CUSTOM_MENU_CAMPAIGN_CLICK="POPUP_CUSTOM_MENU_CAMPAIGN_CLICK",n.TIME_TO_CLOSE_ACTIVATED_NOTIFIER=1e4,n.ACTIVATED_EXPIRED_MS=e.ACTIVATED_EXPIRED_MS,n.ACTIVATED_EXPIRED_MS_FOR_TAOBAO=e.ACTIVATED_EXPIRED_MS_FOR_TAOBAO,n.REFETCH_MERCHANT_INTERVAL_MS=3e5,n.REFETCH_SETTING_INTERVAL_MS=18e5,n.STAND_DOWN_MERCHANT_NOTIFIER_TIMER_MS=864e5,n.PERMISSION_NOTIFIER_TTL=e.PERMISSION_NOTIFIER_TTL,n.CASHBACK_STATUS_UNAVAILABLE="unavailable",n.CASHBACK_STATUS_AVAILABLE="available",n.CASHBACK_STATUS_ACTIVATED="activated",n.CASHBACK_STATUS_FETCHING="fetching",n.CASHBACK_STATUS_TAOBAO_API_DOWN="down",n.ACTIVATE_STATE_NOT_ACTIVATED="ACTIVATE_STATE_NOT_ACTIVATED",n.ACTIVATE_STATE_ACTIVATING="ACTIVATE_STATE_ACTIVATING",n.ACTIVATE_STATE_ACTIVATED="ACTIVATE_STATE_ACTIVATED",n.DEFAULT_DISABLE_REASON="2",n.TAOBAO_SET_PRODUCT_FROM_AI_TAOBAO_SEARCH_TO_ACTIVATED="TAOBAO_SET_PRODUCT_FROM_AI_TAOBAO_SEARCH_TO_ACTIVATED",n.TAOBAO_TOGGLE_SEARCH_BOX="TAOBAO_TOGGLE_SEARCH_BOX",n.TAOBAO_OPEN_NOTIFIER="TAOBAO_OPEN_NOTIFIER",n.TAOBAO_CLOSE_NOTIFIER="TAOBAO_CLOSE_NOTIFIER",n.TAOBAO_OPEN_CONFIRMATION_NOTIFIER="TAOBAO_OPEN_CONFIRMATION_NOTIFIER",n.TAOBAO_CLOSE_CONFIRMATION_NOTIFIER="TAOBAO_CLOSE_CONFIRMATION_NOTIFIER",n.TAOBAO_OPEN_API_DOWN_NOTIFIER="TAOBAO_OPEN_API_DOWN_NOTIFIER",n.TAOBAO_CLOSE_API_DOWN_NOTIFIER="TAOBAO_CLOSE_API_DOWN_NOTIFIER",n.TAOBAO_MATERIAL_LIB_TYPE_HAS_CASHBACK=["1","1,2"],n.SHOPBACK_TAOBAO_CART="shopback-taobao-cart",n.GET_TAB_OF_CONTENT_SCRIPT="GET_TAB_OF_CONTENT_SCRIPT",n.SET_ICON_BADGE_TEXT="SET_ICON_BADGE_TEXT",n.COUNTRIES=["au","id","my","ph","sg","th","tw"],n.c=0,n.s=1,n.COUNTRY_LOCALES={au:"en-AU",id:"id",my:"ms-MY",ph:"en",sg:"en-SG",th:"th",tw:"en"},n.COUNTRY_CURRENCY_CODES={au:"AUD",id:"IDR",my:"MYR",ph:"PHP",sg:"SGD",th:"THB",tw:"NTD"},n.TOP_MERCHANT_TAB="topMerchants",n.COUPONS_TAB="coupons",n.MY_ACCOUNT_TAB="myAccount",n.UTM_BE_NOTIFIER_CASHBACK="be_cashback_notifier",n.l="be_disable_notifier",n.UTM_BE_CONFIRM_NOTIFIER="be_confirmation_notifier",n.UTM_BE_MENU_CASHBACK="be_menu_getcashback",n.UTM_BE_MENU_LOGIN_CASHBACK="be_menu_logintogetcashback",n.UTM_BE_MENU_STORE_NONLOGIN="be_menu_store_nonlogin",n.UTM_BE_MENU_STORE="be_menu_store",n.UTM_BE_LOGIN_NOTIFIER="be_login_notifier",n.UTM_BE_TAOBAO_LOGIN_CASHBACK_NOTIFIER="be_taobao_login_cashback_notifier",n.UTM_BE_TAOBAO_SEARCH="be_taobao_searchbar",n.UTM_BE_TAOBAO_CASHBACK_NOTIFIER="be_taobao_cashback_notifier",n.UTM_BE_TAOBAO_LOGIN_SEARCHBAR="be_taobao_login_searchbar",n.HEIGHT_OF_NORMAL_MENU=468,n.HEIGHT_OF_MERCHANT_MENU=537,n.HEIGHT_OF_TAOBAO_MENU=603,n.ACTIVATED_NOTIFIER_NOT_YET_VISITED=0,n.ACTIVATED_NOTIFIER_VISITED=1,n.ACTIVATED_NOTIFIER_CLOSED=2,n.SENTRY_ERROR_LOGGING="SENTRY_ERROR_LOGGING",n.SERP_LIST=[{domain:"yahoo",rx:"search\\.yahoo\\.com\\/",pattern:"h3.title > a",href:"=(http[^/]*)",searchInputPattern:"div#sbq-wrap > #yschsp"},{domain:"bing",rx:"\\.bing\\.com\\/search.*[&?]q=([^&]*)",pattern:'#b_results>.b_algo, #b_results>li, #b_results h2 a, div[class="sb_tlst"] * a',searchInputPattern:"#sb_form_q"},{domain:"google",rx:"^https?:\\/\\/(?:www\\.|encrypted\\.)?google\\.[\\w\\.]{2,6}.*",pattern:"div.rc > .r > a",searchInputPattern:".gLFyf"}],n.OTHER_SERP_PATTERN_LIST=[".ebates-serp","#gym_serp"],n.OPEN_BROWSER_WINDOW="OPEN_BROWSER_WINDOW",n.COUNTRY_BOOKING_IDENTIFIER={au:{aid:"1465791"},id:{aid:"1691096"},my:{aid:"1691091"},ph:{aid:"1244848"},sg:{aid:"1691090"},th:{aid:"1275028"},tw:{aid:"1244849"},com:{aid:"1691090"}},n.ICON_BADGE_BACKGROUND_COLOR="#fbb215",n.COUPON_NOTIFIER_DIV_ID="shopback-coupon-notifier",n.COUPON_APPLIER_DIV_ID="shopback-coupon-applier",n.CASHBACK_NOTIFIER_DIV_ID="shopback-cashback-notifier",n.POPUP_SEARCH_MERCHANT_INPUT_BOX_ID="shopback-popup-search-input-box",n.TAOBAO_NAVIGATOR_DIV_ID="shopback-taobao-navigator",n.IS_FIREFOX=-1===navigator.userAgent.indexOf("Chrome"),n.ACCESS_TOKEN_NAME="sbet",n.SECONDS_OF_ONE_YEAR=31536e3,n.HEADERS={X_SHOPBACK_LAST_CC:"X-SHOPBACK-LAST-CC",X_SHOPBACK_IRONGATE_ENABLED:"X-SHOPBACK-IRONGATE-ENABLED",X_SHOPBACK_DOMAIN:"X-SHOPBACK-DOMAIN",X_SHOPBACK_CLIENT_USER_AGENT:"X-SHOPBACK-CLIENT-USER-AGENT",X_SHOPBACK_ACCESS_TOKEN:"X-SHOPBACK-ACCESS-TOKEN",X_SHOPBACK_REFRESH_TOKEN:"X-SHOPBACK-REFRESH-TOKEN",CONTENT_TYPE:"Content-Type",ACCEPT:"Accept"},n.DEFAULT_EVENT_REASON="For more information, please visit",n.DEFAULT_USER_DATA_POLICY_URL="https://support.shopback.sg/hc/en-us/articles/360039652893",n.EVENT_REASONS_MAP={EVENT_EXT_INSTALLED:"To report ShopBack installs for product analytics. For more information, please visit",EVENT_EXT_PAGE_VISITED:"To look up domain to determine if it is a site ShopBack supports and determine appropriate ShopBack behavior. For more information, please visit",EVENT_EXT_NOTIFIER_PROMPT:"To report first interaction with ShopBack for product analytics. For more information, please visit",EVENT_EXT_REDIRECT:"To report affiliate tagging for product analytics. For more information, please visit",EVENT_EXT_NOTIFIER_ACTIVATED_PROMPT:"To report affiliate activation to verify ShopBack is performing as expected. For more information, please visit",EVENT_EXT_MENU_OPEN:"To report ShopBack manually opened for product analytics. For more information, please visit",EVENT_EXT_CLICK:"To report interactions with ShopBack for product analytics. For more information, please visit",EVENT_EXT_SEARCH:"To report interactions with ShopBack for product analytics. For more information, please visit",EVENT_EXT_ERROR_OCCURED:"To report when ShopBack is not performing as expected. For more information, please visit",EVENT_EXT_LOGIN:"To report interactions with ShopBack for product analytics. For more information, please visit",EVENT_EXT_UPDATED:"To report version update for product analytics. For more information, please visit",EVENT_EXT_APPLY_COUPON_CODE:"To report coupon application status for product analytics. For more information, please visit",EVENT_EXT_MANUAL_APPLY_COUPON_CODE:"To report coupon application status for product analytics. For more information, please visit",EVENT_EXT_SERP_VISITED:"To report interactions with ShopBack for product analytics. For more information, please visit",EVENT_EXT_SERP_CLICKED:"To report interactions with ShopBack for product analytics. For more information, please visit"},n.USER_DATA_POLICY_PAGE_URLS={au:"https://support.shopback.com.au/hc/en-us/articles/360039114834",tw:"https://support.shopback.com.tw/hc/zh-tw/articles/360039187814",id:"https://support.shopback.co.id/hc/id/articles/360039941853",my:"https://support.shopback.my/hc/en-us/articles/360026274913",sg:"https://support.shopback.sg/hc/en-us/articles/360039652893",ph:"https://support.shopback.ph/hc/en-us/articles/115010370828",th:"https://support.shopback.co.th/hc/th/articles/360037977973"}},10:function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},101:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=v(r(38)),o=v(r(75)),i=v(r(5));n.fetchMerchants=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.DEFAULT_COUNTRY,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(r,e){var i;return(0,u.fetchWithRetry)((0,f.getMerchantsAPI)(t,{confirmation:!0,disableReason:!0,metaInfo:!0},(0,h.ironGateEnabled)(e())),{headers:(i={},(0,o.default)(i,s.HEADERS.X_SHOPBACK_LAST_CC,t),(0,o.default)(i,s.HEADERS.X_SHOPBACK_IRONGATE_ENABLED,(0,h.ironGateEnabled)(e())),i),retryOnHttpStatus:[500,502,503,504]}).then(function(t){return t.json()}).then(function(o){r(function(t,n,r){return{type:n?s.REFETCH_MERCHANTS_SUCCESS:s.FETCH_MERCHANTS_SUCCESS,payload:{cc:r,merchants:t,activateX:browser.i18n.getMessage("notifier_cashback_activate"),reActivateX:browser.i18n.getMessage("disabler_cashback_activate"),loginToActivateX:browser.i18n.getMessage("notifier_log_in_first"),cashbackHeader:browser.i18n.getMessage("popup_header_cashback"),serpCashbackInfo:browser.i18n.getMessage("serp_cashback_info"),cashbackModifiers:{"<":browser.i18n.getMessage("notifier_cashback_modifier_up_to"),"<=":browser.i18n.getMessage("notifier_cashback_modifier_up_to"),"=":""}}}}(p(o,(0,h.ironGateEnabled)(e())),n,t))}).catch(function(t){var n=t.message;r((0,c.apiError)({errorType:s.FETCH_MERCHANTS_ERROR,message:n}))})}},n.standDownMerchantNotifier=function(t){var n=t.merchantId;return{type:s.STAND_DOWN_MERCHANT_NOTIFIER,payload:{merchantId:n}}},n.standUpMerchantNotifier=function(t){var n=t.merchantId;return{type:s.STAND_UP_MERCHANT_NOTIFIER,payload:{merchantId:n}}},n.closeMerchantNotifier=function(t){var n=t.merchantId;return{type:s.CLOSE_MERCHANT_NOTIFIER,payload:{merchantId:n}}},n.uiCloseMerchantNotifier=function(t){return{type:s.CLOSE_MERCHANT_NOTIFIER,merchantId:t}},n.fetchTopMerchants=function(){return function(t,n){var r;return fetch((0,f.getMerchantsAPI)(n().cc,{top:!0},(0,h.ironGateEnabled)(n())),{headers:(r={},(0,o.default)(r,s.HEADERS.X_SHOPBACK_LAST_CC,n().cc),(0,o.default)(r,s.HEADERS.X_SHOPBACK_IRONGATE_ENABLED,(0,h.ironGateEnabled)(n())),r)}).then(u.handleErrors).then(function(t){return t.json()}).then(function(r){var e;t((e=p(r,(0,h.ironGateEnabled)(n())),{type:s.FETCH_TOP_MERCHANTS_SUCCESS,payload:e}))}).catch(function(n){var r=n.message;t((0,c.apiError)({errorType:s.FETCH_TOP_MERCHANTS_ERROR,message:r}))})}},n.uiFetchTopMerchants=function(){return{type:s.FETCH_TOP_MERCHANTS}},n.deActivate=function(t){return{type:s.DE_ACTIVATE,payload:(0,i.default)({},t)}},n.uiDeActivate=function(t){return{type:s.DE_ACTIVATE,merchantId:t}},n.startActivate=function(t){return function(n){return browser.tabs.query({active:!0,currentWindow:!0}).then(function(r){var o=(0,e.default)(r,1),i=o[0];n({type:s.START_ACTIVATE,payload:{tabId:i.id,referrer:t.forceToSetReferrer?t.prevUrl||i.url:null,merchantId:t.merchantId}}),n({type:s.ADD_DIRTY_REDIRECT,payload:{tabId:i.id,from:t.from,merchantId:t.merchantId}})})}},n.uiStartActivate=function(t){return(0,i.default)({type:s.START_ACTIVATE},t)},n.deleteExpiredActivatedMerchant=function(t){return{type:s.DELETE_EXPIRED_ACTIVATED_MERCHANT,payload:{merchant:t}}},n.closeActivatedMerchantNotifier=d,n.uiCloseActivatedMerchantNotifier=function(t){return{type:s.CLOSE_ACTIVATED_MERCHANT_NOTIFIER,merchantId:t}},n.detectSBRedirectPage=function(t){return{type:s.DETECT_SB_REDIRECT_PAGE,payload:(0,i.default)({},t)}},n.uiDetectSBRedirectPage=function(t){return(0,i.default)({type:s.DETECT_SB_REDIRECT_PAGE},t)},n.visitActivatedMerchantNotifier=function(t){var n=t.merchant;return function(t,r){var e=(0,a.getActivatedMerchantInfo)(r(),{merchant:n});return e&&e.visited===s.ACTIVATED_NOTIFIER_NOT_YET_VISITED?(t({type:s.VISIT_ACTIVATED_MERCHANT_NOTIFIER,payload:{merchantId:n.id}}),new Promise(function(r){setTimeout(function(){t(d({merchantId:n.id})),r()},s.TIME_TO_CLOSE_ACTIVATED_NOTIFIER)})):Promise.resolve()}},n.uiVisitActivatedMerchantNotifier=function(t){return{type:s.VISIT_ACTIVATED_MERCHANT_NOTIFIER,merchant:t}},n.h=function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(e,o){return t.isTaobao||(0,l.v)(o(),{merchant:t})&&!(0,a.p)(o(),{merchant:t})?Promise.resolve({}):e({type:s.o,payload:{merchantId:t.id,focusing:r,tabId:n}})}};var u=r(63),a=r(29),c=r(45),s=r(0),f=r(19),l=r(29),h=r(109);function v(t){return t&&t.__esModule?t:{default:t}}function p(t,n){return t.map(function(t){var r=void 0;try{RegExp(t.url_pattern),r=t.url_pattern}catch(n){console.log("Incorrect url_pattern: "+t.url_pattern),r=""}return(0,i.default)({},t,{id:n?t.merchantId:t.id,url_pattern:r})})}function d(t){var n=t.merchantId;return{type:s.CLOSE_ACTIVATED_MERCHANT_NOTIFIER,payload:{merchantId:n}}}},104:function(t,n,r){(function(n){var e=r(114),o="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},i=o.Raven,u=new e;u.noConflict=function(){return o.Raven=i,u},u.afterLoad(),t.exports=u,t.exports.Client=e}).call(n,r(20))},105:function(t,n,r){"use strict";n.__esModule=!0,n.default=function(t,n){var r={};for(var e in t)n.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}},106:function(t,n,r){r(107);var e=r(2).Object;t.exports=function(t,n,r){return e.defineProperty(t,n,r)}},107:function(t,n,r){var e=r(13);e(e.S+e.F*!r(6),"Object",{defineProperty:r(8).f})},108:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getCloseTaoBaoNotifierAt=n.isTaoBaoShoppingCartPage=n.shouldFetchTaoBaoProductCashbackStatus=n.isProductActivatedByAiTaoBaoSearch=n.isReferrerTaoBaoCouponPage=n.isReferrerAiTaoBao=n.isReferrerHasValidSearchKeyParam=n.shouldDisplay=n.urlContainsAliTrackParam=n.isTaoBaoProductPage=n.getTaoBaoProductIds=n.getTaoBaoProducts=n.getTaoBaoProduct=n.isTaoBaoApiDown=n.isTaoBaoConfirmationNotifierOpened=n.isTaoBaoNotifierOpened=n.isTaoBaoSearchBoxOpened=n.getTaoBaoProductIdByUrl=n.getActivatedProductIdByTab=n.getTaoBaoShoppingCartPagePatterns=n.getTaoBaoProductPagePatterns=n.getTaoBaoApiSettings=n.getTaoBaoSettings=void 0;var e=r(17),o=function(t,n){return n.url},i=function(t,n){return n.referrer},u=function(t){return t.taoBao},a=n.getTaoBaoSettings=function(t){return t.settings.taoBao},c=(n.getTaoBaoApiSettings=function(t){return t.settings.taoBao.api},n.getTaoBaoProductPagePatterns=function(t){return t.settings.taoBao.productPagePatterns}),s=n.getTaoBaoShoppingCartPagePatterns=function(t){return t.settings.taoBao.shoppingCartPagePatterns},f=(n.getActivatedProductIdByTab=(0,e.createSelector)([u,function(t,n){return n.tabId}],function(t,n){return t.activatedProductIdInTab[n]}),n.getTaoBaoProductIdByUrl=(0,e.createSelector)([o],function(t){return new URL(t).searchParams.get("id")||""})),l=(n.isTaoBaoSearchBoxOpened=(0,e.createSelector)([u],function(t){return!!t.searchBoxOpened}),n.isTaoBaoNotifierOpened=(0,e.createSelector)([u],function(t){return!!t.notifierOpened}),n.isTaoBaoConfirmationNotifierOpened=(0,e.createSelector)([u],function(t){return!!t.confirmationNotifierOpened}),n.isTaoBaoApiDown=(0,e.createSelector)([u],function(t){return!!t.taoBaoApiDown}),n.getTaoBaoProduct=(0,e.createSelector)([u,f],function(t,n){return t.products[n]})),h=(n.getTaoBaoProducts=(0,e.createSelector)([u],function(t){return t.products}),n.getTaoBaoProductIds=(0,e.createSelector)([u],function(t){return Object.keys(t.products)}),n.isTaoBaoProductPage=(0,e.createSelector)([c,f,o],function(t,n,r){return!(!n||!t.some(function(t){return new RegExp(t).test(r)}))})),v=n.urlContainsAliTrackParam=(0,e.createSelector)([a,o],function(t,n){var r=new URL(n);return r.searchParams.has(t.aliTrackIdParamKey)&&r.searchParams.get(t.aliTrackIdParamKey).startsWith(t.aliTrackIdParamValue)}),p=(n.shouldDisplay=(0,e.createSelector)([function(t,n){return n.merchant}],function(t){return!(!t||!t.popup_enabled)}),n.isReferrerHasValidSearchKeyParam=(0,e.createSelector)([i],function(t){return!(!t||!new URL(t).searchParams.get("key"))})),d=n.isReferrerAiTaoBao=(0,e.createSelector)([a,i],function(t,n){return new RegExp(t.aiTaoBaoSearchPattern).test(n)}),_=n.isReferrerTaoBaoCouponPage=(0,e.createSelector)([a,i],function(t,n){return new RegExp(t.taoBaoCouponPageUrlPattern).test(n)}),b=n.isProductActivatedByAiTaoBaoSearch=(0,e.createSelector)([v,d,_,p],function(t,n,r,e){return!(!t||!(n&&e||r))});n.shouldFetchTaoBaoProductCashbackStatus=(0,e.createSelector)([h,l,b],function(t,n,r){return!(!t||n||r)}),n.isTaoBaoShoppingCartPage=(0,e.createSelector)([s,o],function(t,n){return t.some(function(t){return new RegExp(t).test(n)})}),n.getCloseTaoBaoNotifierAt=(0,e.createSelector)([u],function(t){return t.closeTaoBaoNotifierAt})},109:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shouldFetchSettings=n.taoBaoLinkEnabled=n.couponsEnabled=n.ironGateEnabled=void 0;var e=r(17),o=r(0),i=function(t){return t.cc},u=function(t){return t.settings.serviceEnableCountry},a=(0,e.createSelector)([u],function(t){return t.ironGate}),c=(0,e.createSelector)([u],function(t){return t.coupons}),s=(0,e.createSelector)([u],function(t){return t.taoBaoLink});n.ironGateEnabled=(0,e.createSelector)([i,a],function(t,n){return n.some(function(n){return n.toUpperCase()===t.toUpperCase()})}),n.couponsEnabled=(0,e.createSelector)([i,c],function(t,n){return n.some(function(n){return n.toUpperCase()===t.toUpperCase()})}),n.taoBaoLinkEnabled=(0,e.createSelector)([i,s],function(t,n){return n.some(function(n){return n.toUpperCase()===t.toUpperCase()})}),n.shouldFetchSettings=(0,e.createSelector)([function(t){return t.settings},function(t,n){return n.now}],function(t,n){if(!t)return!0;var r=t.fetchedAt;return"number"!=typeof r||n-r>o.REFETCH_SETTING_INTERVAL_MS})},11:function(t,n,r){t.exports=r(145)()},110:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isLoggerEnabled=void 0;var e=r(17);n.isLoggerEnabled=(0,e.createSelector)([function(t){return t.extension}],function(t){return!!t.loggerEnabled})},113:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sendToSentry=void 0;var e,o=r(104),i=(e=o)&&e.__esModule?e:{default:e};n.sendToSentry=function(t){t instanceof Error?i.default.captureException(t):t instanceof Response&&i.default.captureMessage("Error : "+t.status+" "+t.statusText)}},114:function(t,n,r){(function(n){var e=r(115),o=r(71),i=r(116),u=r(117),a=r(55),c=a.isError,s=a.isObject,f=a.isPlainObject,l=a.isErrorEvent,h=a.isUndefined,v=a.isFunction,p=a.isString,d=a.isArray,_=a.isEmptyObject,b=a.each,m=a.objectMerge,E=a.truncate,T=a.objectFrozen,y=a.hasKey,O=a.joinRegExp,g=a.urlencode,S=a.uuid4,w=a.htmlTreeAsString,C=a.isSameException,k=a.isSameStacktrace,N=a.parseUrl,I=a.fill,A=a.supportsFetch,R=a.supportsReferrerPolicy,P=a.serializeKeysForMessage,j=a.serializeException,L=a.sanitize,M=r(118).wrapMethod,F="source protocol user pass host port path".split(" "),D=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function x(){return+new Date}var B="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},H=B.document,U=B.navigator;function X(t,n){return v(n)?function(r){return n(r,t)}:n}function K(){for(var t in this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!h(H),this._hasNavigator=!h(U),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:B.SENTRY_RELEASE&&B.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",keepalive:!0,referrerPolicy:R()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=B.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=x(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=B.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[t]=this._originalConsole[t]}K.prototype={VERSION:"3.24.1",debug:!1,TraceKit:e,config:function(t,n){var r=this;if(r._globalServer)return this._logDebug("error","Error: Raven has already been configured"),r;if(!t)return r;var o=r._globalOptions;n&&b(n,function(t,n){"tags"===t||"extra"===t||"user"===t?r._globalContext[t]=n:o[t]=n}),r.setDSN(t),o.ignoreErrors.push(/^Script error\.?$/),o.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),o.ignoreErrors=O(o.ignoreErrors),o.ignoreUrls=!!o.ignoreUrls.length&&O(o.ignoreUrls),o.whitelistUrls=!!o.whitelistUrls.length&&O(o.whitelistUrls),o.includePaths=O(o.includePaths),o.maxBreadcrumbs=Math.max(0,Math.min(o.maxBreadcrumbs||100,100));var i={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},u=o.autoBreadcrumbs;"[object Object]"==={}.toString.call(u)?u=m(i,u):!1!==u&&(u=i),o.autoBreadcrumbs=u;var a={tryCatch:!0},c=o.instrument;return"[object Object]"==={}.toString.call(c)?c=m(a,c):!1!==c&&(c=a),o.instrument=c,e.collectWindowErrors=!!o.collectWindowErrors,r},install:function(){var t=this;return t.isSetup()&&!t._isRavenInstalled&&(e.report.subscribe(function(){t._handleOnErrorStackInfo.apply(t,arguments)}),t._globalOptions.captureUnhandledRejections&&t._attachPromiseRejectionHandler(),t._patchFunctionToString(),t._globalOptions.instrument&&t._globalOptions.instrument.tryCatch&&t._instrumentTryCatch(),t._globalOptions.autoBreadcrumbs&&t._instrumentBreadcrumbs(),t._drainPlugins(),t._isRavenInstalled=!0),Error.stackTraceLimit=t._globalOptions.stackTraceLimit,this},setDSN:function(t){var n=this._parseDSN(t),r=n.path.lastIndexOf("/"),e=n.path.substr(1,r);this._dsn=t,this._globalKey=n.user,this._globalSecret=n.pass&&n.pass.substr(1),this._globalProject=n.path.substr(r+1),this._globalServer=this._getGlobalServer(n),this._globalEndpoint=this._globalServer+"/"+e+"api/"+this._globalProject+"/store/",this._resetBackoff()},context:function(t,n,r){return v(t)&&(r=n||[],n=t,t=void 0),this.wrap(t,n).apply(this,r)},wrap:function(t,n,r){var e=this;if(h(n)&&!v(t))return t;if(v(t)&&(n=t,t=void 0),!v(n))return n;try{if(n.__raven__)return n;if(n.__raven_wrapper__)return n.__raven_wrapper__}catch(t){return n}function o(){var o=[],i=arguments.length,u=!t||t&&!1!==t.deep;for(r&&v(r)&&r.apply(this,arguments);i--;)o[i]=u?e.wrap(t,arguments[i]):arguments[i];try{return n.apply(this,o)}catch(n){throw e._ignoreNextOnError(),e.captureException(n,t),n}}for(var i in n)y(n,i)&&(o[i]=n[i]);return o.prototype=n.prototype,n.__raven_wrapper__=o,o.__raven__=!0,o.__orig__=n,o},uninstall:function(){return e.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function(t){this._logDebug("debug","Raven caught unhandled promise rejection:",t),this.captureException(t.reason,{extra:{unhandledPromiseRejection:!0}})},_attachPromiseRejectionHandler:function(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),B.addEventListener&&B.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function(){return B.removeEventListener&&B.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function(t,n){if(n=m({trimHeadFrames:0},n||{}),l(t)&&t.error)t=t.error;else if(c(t))t=t;else{if(!f(t))return this.captureMessage(t,m(n,{stacktrace:!0,trimHeadFrames:n.trimHeadFrames+1}));n=this._getCaptureExceptionOptionsFromPlainObject(n,t),t=new Error(n.message)}this._lastCapturedException=t;try{var r=e.computeStackTrace(t);this._handleStackInfo(r,n)}catch(n){if(t!==n)throw n}return this},_getCaptureExceptionOptionsFromPlainObject:function(t,n){var r=Object.keys(n).sort(),e=m(t,{message:"Non-Error exception captured with keys: "+P(r),fingerprint:[i(r)],extra:t.extra||{}});return e.extra.__serialized__=j(n),e},captureMessage:function(t,n){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)){var r,o=m({message:t+=""},n=n||{});try{throw new Error(t)}catch(t){r=t}r.name=null;var i=e.computeStackTrace(r),u=d(i.stack)&&i.stack[1],a=u&&u.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(a))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(a))){if(this._globalOptions.stacktrace||n&&n.stacktrace){o.fingerprint=null==o.fingerprint?t:o.fingerprint,(n=m({trimHeadFrames:0},n)).trimHeadFrames+=1;var c=this._prepareFrames(i,n);o.stacktrace={frames:c.reverse()}}return o.fingerprint&&(o.fingerprint=d(o.fingerprint)?o.fingerprint:[o.fingerprint]),this._send(o),this}}},captureBreadcrumb:function(t){var n=m({timestamp:x()/1e3},t);if(v(this._globalOptions.breadcrumbCallback)){var r=this._globalOptions.breadcrumbCallback(n);if(s(r)&&!_(r))n=r;else if(!1===r)return this}return this._breadcrumbs.push(n),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(t){var n=[].slice.call(arguments,1);return this._plugins.push([t,n]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(t){return this._globalContext.user=t,this},setExtraContext:function(t){return this._mergeContext("extra",t),this},setTagsContext:function(t){return this._mergeContext("tags",t),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(o(this._globalContext))},setEnvironment:function(t){return this._globalOptions.environment=t,this},setRelease:function(t){return this._globalOptions.release=t,this},setDataCallback:function(t){var n=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=X(n,t),this},setBreadcrumbCallback:function(t){var n=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=X(n,t),this},setShouldSendCallback:function(t){var n=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=X(n,t),this},setTransport:function(t){return this._globalOptions.transport=t,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var t=B.RavenConfig;t&&this.config(t.dsn,t.config).install()},showReportDialog:function(t){if(H){var n=(t=t||{}).eventId||this.lastEventId();if(!n)throw new u("Missing eventId");var r=t.dsn||this._dsn;if(!r)throw new u("Missing DSN");var e=encodeURIComponent,o="";o+="?eventId="+e(n),o+="&dsn="+e(r);var i=t.user||this._globalContext.user;i&&(i.name&&(o+="&name="+e(i.name)),i.email&&(o+="&email="+e(i.email)));var a=this._getGlobalServer(this._parseDSN(r)),c=H.createElement("script");c.async=!0,c.src=a+"/api/embed/error-page/"+o,(H.head||H.body).appendChild(c)}},_ignoreNextOnError:function(){var t=this;this._ignoreOnError+=1,setTimeout(function(){t._ignoreOnError-=1})},_triggerEvent:function(t,n){var r,e;if(this._hasDocument){for(e in n=n||{},t="raven"+t.substr(0,1).toUpperCase()+t.substr(1),H.createEvent?(r=H.createEvent("HTMLEvents")).initEvent(t,!0,!0):(r=H.createEventObject()).eventType=t,n)y(n,e)&&(r[e]=n[e]);if(H.createEvent)H.dispatchEvent(r);else try{H.fireEvent("on"+r.eventType.toLowerCase(),r)}catch(t){}}},_breadcrumbEventHandler:function(t){var n=this;return function(r){if(n._keypressTimeout=null,n._lastCapturedEvent!==r){var e;n._lastCapturedEvent=r;try{e=w(r.target)}catch(t){e="<unknown>"}n.captureBreadcrumb({category:"ui."+t,message:e})}}},_keypressEventHandler:function(){var t=this;return function(n){var r;try{r=n.target}catch(t){return}var e=r&&r.tagName;if(e&&("INPUT"===e||"TEXTAREA"===e||r.isContentEditable)){var o=t._keypressTimeout;o||t._breadcrumbEventHandler("input")(n),clearTimeout(o),t._keypressTimeout=setTimeout(function(){t._keypressTimeout=null},1e3)}}},_captureUrlChange:function(t,n){var r=N(this._location.href),e=N(n),o=N(t);this._lastHref=n,r.protocol===e.protocol&&r.host===e.host&&(n=e.relative),r.protocol===o.protocol&&r.host===o.host&&(t=o.relative),this.captureBreadcrumb({category:"navigation",data:{to:n,from:t}})},_patchFunctionToString:function(){var t=this;t._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.__raven__?t._originalFunctionToString.apply(this.__orig__,arguments):t._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){var t=this,n=t._wrappedBuiltIns;function r(n){return function(r,e){for(var o=new Array(arguments.length),i=0;i<o.length;++i)o[i]=arguments[i];var u=o[0];return v(u)&&(o[0]=t.wrap(u)),n.apply?n.apply(this,o):n(o[0],o[1])}}var e=this._globalOptions.autoBreadcrumbs;function o(r){var o=B[r]&&B[r].prototype;o&&o.hasOwnProperty&&o.hasOwnProperty("addEventListener")&&(I(o,"addEventListener",function(n){return function(o,i,u,a){try{i&&i.handleEvent&&(i.handleEvent=t.wrap(i.handleEvent))}catch(t){}var c,s,f;return e&&e.dom&&("EventTarget"===r||"Node"===r)&&(s=t._breadcrumbEventHandler("click"),f=t._keypressEventHandler(),c=function(t){if(t){var n;try{n=t.type}catch(t){return}return"click"===n?s(t):"keypress"===n?f(t):void 0}}),n.call(this,o,t.wrap(i,void 0,c),u,a)}},n),I(o,"removeEventListener",function(t){return function(n,r,e,o){try{r=r&&(r.__raven_wrapper__?r.__raven_wrapper__:r)}catch(t){}return t.call(this,n,r,e,o)}},n))}I(B,"setTimeout",r,n),I(B,"setInterval",r,n),B.requestAnimationFrame&&I(B,"requestAnimationFrame",function(n){return function(r){return n(t.wrap(r))}},n);for(var i=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],u=0;u<i.length;u++)o(i[u])},_instrumentBreadcrumbs:function(){var t=this,n=this._globalOptions.autoBreadcrumbs,r=t._wrappedBuiltIns;function e(n,r){n in r&&v(r[n])&&I(r,n,function(n){return t.wrap(n)})}if(n.xhr&&"XMLHttpRequest"in B){var o=B.XMLHttpRequest&&B.XMLHttpRequest.prototype;I(o,"open",function(n){return function(r,e){return p(e)&&-1===e.indexOf(t._globalKey)&&(this.__raven_xhr={method:r,url:e,status_code:null}),n.apply(this,arguments)}},r),I(o,"send",function(n){return function(){var r=this;function o(){if(r.__raven_xhr&&4===r.readyState){try{r.__raven_xhr.status_code=r.status}catch(t){}t.captureBreadcrumb({type:"http",category:"xhr",data:r.__raven_xhr})}}for(var i=["onload","onerror","onprogress"],u=0;u<i.length;u++)e(i[u],r);return"onreadystatechange"in r&&v(r.onreadystatechange)?I(r,"onreadystatechange",function(n){return t.wrap(n,void 0,o)}):r.onreadystatechange=o,n.apply(this,arguments)}},r)}n.xhr&&A()&&I(B,"fetch",function(n){return function(){for(var r=new Array(arguments.length),e=0;e<r.length;++e)r[e]=arguments[e];var o,i=r[0],u="GET";if("string"==typeof i?o=i:"Request"in B&&i instanceof B.Request?(o=i.url,i.method&&(u=i.method)):o=""+i,-1!==o.indexOf(t._globalKey))return n.apply(this,r);r[1]&&r[1].method&&(u=r[1].method);var a={method:u,url:o,status_code:null};return n.apply(this,r).then(function(n){return a.status_code=n.status,t.captureBreadcrumb({type:"http",category:"fetch",data:a}),n})}},r),n.dom&&this._hasDocument&&(H.addEventListener?(H.addEventListener("click",t._breadcrumbEventHandler("click"),!1),H.addEventListener("keypress",t._keypressEventHandler(),!1)):H.attachEvent&&(H.attachEvent("onclick",t._breadcrumbEventHandler("click")),H.attachEvent("onkeypress",t._keypressEventHandler())));var i=B.chrome,u=!(i&&i.app&&i.app.runtime)&&B.history&&history.pushState&&history.replaceState;if(n.location&&u){var a=B.onpopstate;B.onpopstate=function(){var n=t._location.href;if(t._captureUrlChange(t._lastHref,n),a)return a.apply(this,arguments)};var c=function(n){return function(){var r=arguments.length>2?arguments[2]:void 0;return r&&t._captureUrlChange(t._lastHref,r+""),n.apply(this,arguments)}};I(history,"pushState",c,r),I(history,"replaceState",c,r)}if(n.console&&"console"in B&&console.log){var s=function(n,r){t.captureBreadcrumb({message:n,level:r.level,category:"console"})};b(["debug","info","warn","error","log"],function(t,n){M(console,n,s)})}},_restoreBuiltIns:function(){for(var t;this._wrappedBuiltIns.length;){var n=(t=this._wrappedBuiltIns.shift())[0],r=t[1],e=t[2];n[r]=e}},_restoreConsole:function(){for(var t in this._originalConsoleMethods)this._originalConsole[t]=this._originalConsoleMethods[t]},_drainPlugins:function(){var t=this;b(this._plugins,function(n,r){var e=r[0],o=r[1];e.apply(t,[t].concat(o))})},_parseDSN:function(t){var n=D.exec(t),r={},e=7;try{for(;e--;)r[F[e]]=n[e]||""}catch(n){throw new u("Invalid DSN: "+t)}if(r.pass&&!this._globalOptions.allowSecretKey)throw new u("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return r},_getGlobalServer:function(t){var n="//"+t.host+(t.port?":"+t.port:"");return t.protocol&&(n=t.protocol+":"+n),n},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(t,n){var r=this._prepareFrames(t,n);this._triggerEvent("handle",{stackInfo:t,options:n}),this._processException(t.name,t.message,t.url,t.lineno,r,n)},_prepareFrames:function(t,n){var r=this,e=[];if(t.stack&&t.stack.length&&(b(t.stack,function(n,o){var i=r._normalizeFrame(o,t.url);i&&e.push(i)}),n&&n.trimHeadFrames))for(var o=0;o<n.trimHeadFrames&&o<e.length;o++)e[o].in_app=!1;return e=e.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(t,n){var r={filename:t.url,lineno:t.line,colno:t.column,function:t.func||"?"};return t.url||(r.filename=n),r.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(r.filename)||/(Raven|TraceKit)\./.test(r.function)||/raven\.(min\.)?js$/.test(r.filename)),r},_processException:function(t,n,r,e,o,i){var u,a=(t?t+": ":"")+(n||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(n)&&!this._globalOptions.ignoreErrors.test(a))&&(o&&o.length?(r=o[0].filename||r,o.reverse(),u={frames:o}):r&&(u={frames:[{filename:r,lineno:e,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(r))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(r)))){var c=m({exception:{values:[{type:t,value:n,stacktrace:u}]},culprit:r},i);this._send(c)}},_trimPacket:function(t){var n=this._globalOptions.maxMessageLength;if(t.message&&(t.message=E(t.message,n)),t.exception){var r=t.exception.values[0];r.value=E(r.value,n)}var e=t.request;return e&&(e.url&&(e.url=E(e.url,this._globalOptions.maxUrlLength)),e.Referer&&(e.Referer=E(e.Referer,this._globalOptions.maxUrlLength))),t.breadcrumbs&&t.breadcrumbs.values&&this._trimBreadcrumbs(t.breadcrumbs),t},_trimBreadcrumbs:function(t){for(var n,r,e,o=["to","from","url"],i=0;i<t.values.length;++i)if((r=t.values[i]).hasOwnProperty("data")&&s(r.data)&&!T(r.data)){e=m({},r.data);for(var u=0;u<o.length;++u)n=o[u],e.hasOwnProperty(n)&&e[n]&&(e[n]=E(e[n],this._globalOptions.maxUrlLength));t.values[i].data=e}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var t={};return this._hasNavigator&&U.userAgent&&(t.headers={"User-Agent":navigator.userAgent}),B.location&&B.location.href&&(t.url=B.location.href),this._hasDocument&&H.referrer&&(t.headers||(t.headers={}),t.headers.Referer=H.referrer),t}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&x()-this._backoffStart<this._backoffDuration},_isRepeatData:function(t){var n=this._lastData;return!(!n||t.message!==n.message||t.culprit!==n.culprit)&&(t.stacktrace||n.stacktrace?k(t.stacktrace,n.stacktrace):!t.exception&&!n.exception||C(t.exception,n.exception))},_setBackoffState:function(t){if(!this._shouldBackoff()){var n=t.status;if(400===n||401===n||429===n){var r;try{r=A()?t.headers.get("Retry-After"):t.getResponseHeader("Retry-After"),r=1e3*parseInt(r,10)}catch(t){}this._backoffDuration=r||(2*this._backoffDuration||1e3),this._backoffStart=x()}}},_send:function(t){var n=this._globalOptions,r={project:this._globalProject,logger:n.logger,platform:"javascript"},e=this._getHttpData();e&&(r.request=e),t.trimHeadFrames&&delete t.trimHeadFrames,(t=m(r,t)).tags=m(m({},this._globalContext.tags),t.tags),t.extra=m(m({},this._globalContext.extra),t.extra),t.extra["session:duration"]=x()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(t.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(t.user=this._globalContext.user),n.environment&&(t.environment=n.environment),n.release&&(t.release=n.release),n.serverName&&(t.server_name=n.serverName),t=this._sanitizeData(t),Object.keys(t).forEach(function(n){(null==t[n]||""===t[n]||_(t[n]))&&delete t[n]}),v(n.dataCallback)&&(t=n.dataCallback(t)||t),t&&!_(t)&&(v(n.shouldSendCallback)&&!n.shouldSendCallback(t)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",t):"number"==typeof n.sampleRate?Math.random()<n.sampleRate&&this._sendProcessedPayload(t):this._sendProcessedPayload(t)))},_sanitizeData:function(t){return L(t,this._globalOptions.sanitizeKeys)},_getUuid:function(){return S()},_sendProcessedPayload:function(t,n){var r=this,e=this._globalOptions;if(this.isSetup())if(t=this._trimPacket(t),this._globalOptions.allowDuplicates||!this._isRepeatData(t)){this._lastEventId=t.event_id||(t.event_id=this._getUuid()),this._lastData=t,this._logDebug("debug","Raven about to send:",t);var o={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(o.sentry_secret=this._globalSecret);var i=t.exception&&t.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:i?(i.type?i.type+": ":"")+i.value:t.message,event_id:t.event_id,level:t.level||"error"});var u=this._globalEndpoint;(e.transport||this._makeRequest).call(this,{url:u,auth:o,data:t,options:e,onSuccess:function(){r._resetBackoff(),r._triggerEvent("success",{data:t,src:u}),n&&n()},onError:function(e){r._logDebug("error","Raven transport failed to send: ",e),e.request&&r._setBackoffState(e.request),r._triggerEvent("failure",{data:t,src:u}),e=e||new Error("Raven send failed (no additional details provided)"),n&&n(e)}})}else this._logDebug("warn","Raven dropped repeat event: ",t)},_makeRequest:function(t){var n=t.url+"?"+g(t.auth),r=null,e={};if(t.options.headers&&(r=this._evaluateHash(t.options.headers)),t.options.fetchParameters&&(e=this._evaluateHash(t.options.fetchParameters)),A()){e.body=o(t.data);var i=m({},this._fetchDefaults),u=m(i,e);return r&&(u.headers=r),B.fetch(n,u).then(function(n){if(n.ok)t.onSuccess&&t.onSuccess();else{var r=new Error("Sentry error code: "+n.status);r.request=n,t.onError&&t.onError(r)}}).catch(function(){t.onError&&t.onError(new Error("Sentry error code: network unavailable"))})}var a=B.XMLHttpRequest&&new B.XMLHttpRequest;a&&(("withCredentials"in a||"undefined"!=typeof XDomainRequest)&&("withCredentials"in a?a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)t.onSuccess&&t.onSuccess();else if(t.onError){var n=new Error("Sentry error code: "+a.status);n.request=a,t.onError(n)}}:(a=new XDomainRequest,n=n.replace(/^https?:/,""),t.onSuccess&&(a.onload=t.onSuccess),t.onError&&(a.onerror=function(){var n=new Error("Sentry error code: XDomainRequest");n.request=a,t.onError(n)})),a.open("POST",n),r&&b(r,function(t,n){a.setRequestHeader(t,n)}),a.send(o(t.data))))},_evaluateHash:function(t){var n={};for(var r in t)if(t.hasOwnProperty(r)){var e=t[r];n[r]="function"==typeof e?e():e}return n},_logDebug:function(t){this._originalConsoleMethods[t]&&this.debug&&Function.prototype.apply.call(this._originalConsoleMethods[t],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(t,n){h(n)?delete this._globalContext[t]:this._globalContext[t]=m(this._globalContext[t]||{},n)}},K.prototype.setUser=K.prototype.setUserContext,K.prototype.setReleaseContext=K.prototype.setRelease,t.exports=K}).call(n,r(20))},115:function(t,n,r){(function(n){var e=r(55),o={collectWindowErrors:!0,debug:!1},i="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},u=[].slice,a="?",c=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function s(){return"undefined"==typeof document||null==document.location?"":document.location.href}o.report=function(){var t,n,r=[],f=null,l=null,h=null;function v(t,n){var e=null;if(!n||o.collectWindowErrors){for(var i in r)if(r.hasOwnProperty(i))try{r[i].apply(null,[t].concat(u.call(arguments,2)))}catch(t){e=t}if(e)throw e}}function p(n,r,i,u,f){var l=e.isErrorEvent(f)?f.error:f,p=e.isErrorEvent(n)?n.message:n;if(h)o.computeStackTrace.augmentStackTraceWithInitialElement(h,r,i,p),d();else if(l&&e.isError(l))v(o.computeStackTrace(l),!0);else{var _,b={url:r,line:i,column:u},m=void 0;if("[object String]"==={}.toString.call(p))(_=p.match(c))&&(m=_[1],p=_[2]);b.func=a,v({name:m,message:p,url:s(),stack:[b]},!0)}return!!t&&t.apply(this,arguments)}function d(){var t=h,n=f;f=null,h=null,l=null,v.apply(null,[t,!1].concat(n))}function _(t,n){var r=u.call(arguments,1);if(h){if(l===t)return;d()}var e=o.computeStackTrace(t);if(h=e,l=t,f=r,setTimeout(function(){l===t&&d()},e.incomplete?2e3:0),!1!==n)throw t}return _.subscribe=function(e){n||(t=i.onerror,i.onerror=p,n=!0),r.push(e)},_.unsubscribe=function(t){for(var n=r.length-1;n>=0;--n)r[n]===t&&r.splice(n,1)},_.uninstall=function(){n&&(i.onerror=t,n=!1,t=void 0),r=[]},_}(),o.computeStackTrace=function(){function t(t){if(void 0!==t.stack&&t.stack){for(var n,r,e,o=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,i=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,c=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,f=/\((\S*)(?::(\d+))(?::(\d+))\)/,l=t.stack.split("\n"),h=[],v=(/^(.*) is undefined$/.exec(t.message),0),p=l.length;v<p;++v){if(r=o.exec(l[v])){var d=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(n=f.exec(r[2]))&&(r[2]=n[1],r[3]=n[2],r[4]=n[3]),e={url:d?null:r[2],func:r[1]||a,args:d?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=i.exec(l[v]))e={url:r[2],func:r[1]||a,args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=u.exec(l[v])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(n=c.exec(r[3]))?(r[3]=n[1],r[4]=n[2],r[5]=null):0!==v||r[5]||void 0===t.columnNumber||(h[0].column=t.columnNumber+1),e={url:r[3],func:r[1]||a,args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}!e.func&&e.line&&(e.func=a),h.push(e)}return h.length?{name:t.name,message:t.message,url:s(),stack:h}:null}}function n(t,n,r,e){var o={url:n,line:r};if(o.url&&o.line){if(t.incomplete=!1,o.func||(o.func=a),t.stack.length>0&&t.stack[0].url===o.url){if(t.stack[0].line===o.line)return!1;if(!t.stack[0].line&&t.stack[0].func===o.func)return t.stack[0].line=o.line,!1}return t.stack.unshift(o),t.partial=!0,!0}return t.incomplete=!0,!1}function r(t,i){for(var u,c,f=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,l=[],h={},v=!1,p=r.caller;p&&!v;p=p.caller)if(p!==e&&p!==o.report){if(c={url:null,func:a,line:null,column:null},p.name?c.func=p.name:(u=f.exec(p.toString()))&&(c.func=u[1]),void 0===c.func)try{c.func=u.input.substring(0,u.input.indexOf("{"))}catch(t){}h[""+p]?v=!0:h[""+p]=!0,l.push(c)}i&&l.splice(0,i);var d={name:t.name,message:t.message,url:s(),stack:l};return n(d,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),d}function e(n,e){var i=null;e=null==e?0:+e;try{if(i=t(n))return i}catch(t){if(o.debug)throw t}try{if(i=r(n,e+1))return i}catch(t){if(o.debug)throw t}return{name:n.name,message:n.message,url:s()}}return e.augmentStackTraceWithInitialElement=n,e.computeStackTraceFromStackProp=t,e}(),t.exports=o}).call(n,r(20))},116:function(t,n){function r(t,n){var r=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(r>>16)<<16|65535&r}function e(t,n,e,o,i,u){return r((a=r(r(n,t),r(o,u)))<<(c=i)|a>>>32-c,e);var a,c}function o(t,n,r,o,i,u,a){return e(n&r|~n&o,t,n,i,u,a)}function i(t,n,r,o,i,u,a){return e(n&o|r&~o,t,n,i,u,a)}function u(t,n,r,o,i,u,a){return e(n^r^o,t,n,i,u,a)}function a(t,n,r,o,i,u,a){return e(r^(n|~o),t,n,i,u,a)}function c(t,n){var e,c,s,f,l;t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;var h=1732584193,v=-271733879,p=-1732584194,d=271733878;for(e=0;e<t.length;e+=16)c=h,s=v,f=p,l=d,v=a(v=a(v=a(v=a(v=u(v=u(v=u(v=u(v=i(v=i(v=i(v=i(v=o(v=o(v=o(v=o(v,p=o(p,d=o(d,h=o(h,v,p,d,t[e],7,-680876936),v,p,t[e+1],12,-389564586),h,v,t[e+2],17,606105819),d,h,t[e+3],22,-1044525330),p=o(p,d=o(d,h=o(h,v,p,d,t[e+4],7,-176418897),v,p,t[e+5],12,1200080426),h,v,t[e+6],17,-1473231341),d,h,t[e+7],22,-45705983),p=o(p,d=o(d,h=o(h,v,p,d,t[e+8],7,1770035416),v,p,t[e+9],12,-1958414417),h,v,t[e+10],17,-42063),d,h,t[e+11],22,-1990404162),p=o(p,d=o(d,h=o(h,v,p,d,t[e+12],7,1804603682),v,p,t[e+13],12,-40341101),h,v,t[e+14],17,-1502002290),d,h,t[e+15],22,1236535329),p=i(p,d=i(d,h=i(h,v,p,d,t[e+1],5,-165796510),v,p,t[e+6],9,-1069501632),h,v,t[e+11],14,643717713),d,h,t[e],20,-373897302),p=i(p,d=i(d,h=i(h,v,p,d,t[e+5],5,-701558691),v,p,t[e+10],9,38016083),h,v,t[e+15],14,-660478335),d,h,t[e+4],20,-405537848),p=i(p,d=i(d,h=i(h,v,p,d,t[e+9],5,568446438),v,p,t[e+14],9,-1019803690),h,v,t[e+3],14,-187363961),d,h,t[e+8],20,1163531501),p=i(p,d=i(d,h=i(h,v,p,d,t[e+13],5,-1444681467),v,p,t[e+2],9,-51403784),h,v,t[e+7],14,1735328473),d,h,t[e+12],20,-1926607734),p=u(p,d=u(d,h=u(h,v,p,d,t[e+5],4,-378558),v,p,t[e+8],11,-2022574463),h,v,t[e+11],16,1839030562),d,h,t[e+14],23,-35309556),p=u(p,d=u(d,h=u(h,v,p,d,t[e+1],4,-1530992060),v,p,t[e+4],11,1272893353),h,v,t[e+7],16,-155497632),d,h,t[e+10],23,-1094730640),p=u(p,d=u(d,h=u(h,v,p,d,t[e+13],4,681279174),v,p,t[e],11,-358537222),h,v,t[e+3],16,-722521979),d,h,t[e+6],23,76029189),p=u(p,d=u(d,h=u(h,v,p,d,t[e+9],4,-640364487),v,p,t[e+12],11,-421815835),h,v,t[e+15],16,530742520),d,h,t[e+2],23,-995338651),p=a(p,d=a(d,h=a(h,v,p,d,t[e],6,-198630844),v,p,t[e+7],10,1126891415),h,v,t[e+14],15,-1416354905),d,h,t[e+5],21,-57434055),p=a(p,d=a(d,h=a(h,v,p,d,t[e+12],6,1700485571),v,p,t[e+3],10,-1894986606),h,v,t[e+10],15,-1051523),d,h,t[e+1],21,-2054922799),p=a(p,d=a(d,h=a(h,v,p,d,t[e+8],6,1873313359),v,p,t[e+15],10,-30611744),h,v,t[e+6],15,-1560198380),d,h,t[e+13],21,1309151649),p=a(p,d=a(d,h=a(h,v,p,d,t[e+4],6,-145523070),v,p,t[e+11],10,-1120210379),h,v,t[e+2],15,718787259),d,h,t[e+9],21,-343485551),h=r(h,c),v=r(v,s),p=r(p,f),d=r(d,l);return[h,v,p,d]}function s(t){var n,r="",e=32*t.length;for(n=0;n<e;n+=8)r+=String.fromCharCode(t[n>>5]>>>n%32&255);return r}function f(t){var n,r=[];for(r[(t.length>>2)-1]=void 0,n=0;n<r.length;n+=1)r[n]=0;var e=8*t.length;for(n=0;n<e;n+=8)r[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return r}function l(t){var n,r,e="";for(r=0;r<t.length;r+=1)n=t.charCodeAt(r),e+="0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n);return e}function h(t){return unescape(encodeURIComponent(t))}function v(t){return function(t){return s(c(f(t),8*t.length))}(h(t))}function p(t,n){return function(t,n){var r,e,o=f(t),i=[],u=[];for(i[15]=u[15]=void 0,o.length>16&&(o=c(o,8*t.length)),r=0;r<16;r+=1)i[r]=909522486^o[r],u[r]=1549556828^o[r];return e=c(i.concat(f(n)),512+8*n.length),s(c(u.concat(e),640))}(h(t),h(n))}t.exports=function(t,n,r){return n?r?p(n,t):l(p(n,t)):r?v(t):l(v(t))}},117:function(t,n){function r(t){this.name="RavenConfigError",this.message=t}r.prototype=new Error,r.prototype.constructor=r,t.exports=r},118:function(t,n,r){var e=r(55);t.exports={wrapMethod:function(t,n,r){var o=t[n],i=t;if(n in t){var u="warn"===n?"warning":n;t[n]=function(){var t=[].slice.call(arguments),a=e.safeJoin(t," "),c={level:u,logger:"console",extra:{arguments:t}};"assert"===n?!1===t[0]&&(a="Assertion failed: "+(e.safeJoin(t.slice(1)," ")||"console.assert"),c.extra.arguments=t.slice(1),r&&r(a,c)):r&&r(a,c),o&&Function.prototype.apply.call(o,i,t)}}}}},119:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.findLoginHistory=n.isLogoutAllSBAccount=n.isLoginByCC=n.isLoggedIn=void 0;var e=r(17),o=r(0),i=function(t){return t.user},u=function(t,n){return n.cc};n.isLoggedIn=(0,e.createSelector)([i],function(t){return!!t.token}),n.isLoginByCC=(0,e.createSelector)([i,u],function(t,n){return!!t.loginHistories[n]}),n.isLogoutAllSBAccount=(0,e.createSelector)([u],function(t){return t===o.DEFAULT_COUNTRY}),n.findLoginHistory=(0,e.createSelector)([i,u],function(t,n){return t.loginHistories[n]})},12:function(t,n,r){var e=r(8),o=r(22);t.exports=r(6)?function(t,n,r){return e.f(t,n,o(1,r))}:function(t,n,r){return t[n]=r,t}},120:function(t,n){},127:function(t,n,r){t.exports={default:r(128),__esModule:!0}},128:function(t,n,r){r(28),r(39),t.exports=r(61).f("iterator")},129:function(t,n,r){t.exports={default:r(130),__esModule:!0}},13:function(t,n,r){var e=r(4),o=r(2),i=r(46),u=r(12),a=r(10),c=function(t,n,r){var s,f,l,h=t&c.F,v=t&c.G,p=t&c.S,d=t&c.P,_=t&c.B,b=t&c.W,m=v?o:o[n]||(o[n]={}),E=m.prototype,T=v?e:p?e[n]:(e[n]||{}).prototype;for(s in v&&(r=n),r)(f=!h&&T&&void 0!==T[s])&&a(m,s)||(l=f?T[s]:r[s],m[s]=v&&"function"!=typeof T[s]?r[s]:_&&f?i(l,e):b&&T[s]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(l):d&&"function"==typeof l?i(Function.call,l):l,d&&((m.virtual||(m.virtual={}))[s]=l,t&c.R&&E&&!E[s]&&u(E,s,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},130:function(t,n,r){r(131),r(120),r(136),r(137),t.exports=r(2).Symbol},131:function(t,n,r){"use strict";var e=r(4),o=r(10),i=r(6),u=r(13),a=r(59),c=r(132).KEY,s=r(18),f=r(41),l=r(40),h=r(27),v=r(3),p=r(61),d=r(62),_=r(133),b=r(134),m=r(9),E=r(15),T=r(37),y=r(16),O=r(47),g=r(22),S=r(48),w=r(135),C=r(99),k=r(49),N=r(8),I=r(26),A=C.f,R=N.f,P=w.f,j=e.Symbol,L=e.JSON,M=L&&L.stringify,F=v("_hidden"),D=v("toPrimitive"),x={}.propertyIsEnumerable,B=f("symbol-registry"),H=f("symbols"),U=f("op-symbols"),X=Object.prototype,K="function"==typeof j&&!!k.f,G=e.QObject,V=!G||!G.prototype||!G.prototype.findChild,W=i&&s(function(){return 7!=S(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(X,n);e&&delete X[n],R(t,n,r),e&&t!==X&&R(X,n,e)}:R,z=function(t){var n=H[t]=S(j.prototype);return n._k=t,n},Q=K&&"symbol"==typeof j.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof j},Y=function(t,n,r){return t===X&&Y(U,n,r),m(t),n=O(n,!0),m(r),o(H,n)?(r.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),r=S(r,{enumerable:g(0,!1)})):(o(t,F)||R(t,F,g(1,{})),t[F][n]=!0),W(t,n,r)):R(t,n,r)},q=function(t,n){m(t);for(var r,e=_(n=y(n)),o=0,i=e.length;i>o;)Y(t,r=e[o++],n[r]);return t},$=function(t){var n=x.call(this,t=O(t,!0));return!(this===X&&o(H,t)&&!o(U,t))&&(!(n||!o(this,t)||!o(H,t)||o(this,F)&&this[F][t])||n)},J=function(t,n){if(t=y(t),n=O(n,!0),t!==X||!o(H,n)||o(U,n)){var r=A(t,n);return!r||!o(H,n)||o(t,F)&&t[F][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=P(y(t)),e=[],i=0;r.length>i;)o(H,n=r[i++])||n==F||n==c||e.push(n);return e},tt=function(t){for(var n,r=t===X,e=P(r?U:y(t)),i=[],u=0;e.length>u;)!o(H,n=e[u++])||r&&!o(X,n)||i.push(H[n]);return i};K||(a((j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===X&&n.call(U,r),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),W(this,t,g(1,r))};return i&&V&&W(X,t,{configurable:!0,set:n}),z(t)}).prototype,"toString",function(){return this._k}),C.f=J,N.f=Y,r(98).f=w.f=Z,r(36).f=$,k.f=tt,i&&!r(23)&&a(X,"propertyIsEnumerable",$,!0),p.f=function(t){return z(v(t))}),u(u.G+u.W+u.F*!K,{Symbol:j});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var et=I(v.store),ot=0;et.length>ot;)d(et[ot++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=j(t)},keyFor:function(t){if(!Q(t))throw TypeError(t+" is not a symbol!");for(var n in B)if(B[n]===t)return n},useSetter:function(){V=!0},useSimple:function(){V=!1}}),u(u.S+u.F*!K,"Object",{create:function(t,n){return void 0===n?S(t):q(S(t),n)},defineProperty:Y,defineProperties:q,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var it=s(function(){k.f(1)});u(u.S+u.F*it,"Object",{getOwnPropertySymbols:function(t){return k.f(T(t))}}),L&&u(u.S+u.F*(!K||s(function(){var t=j();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],o=1;arguments.length>o;)e.push(arguments[o++]);if(r=n=e[1],(E(n)||void 0!==t)&&!Q(t))return b(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!Q(n))return n}),e[1]=n,M.apply(L,e)}}),j.prototype[D]||r(12)(j.prototype,D,j.prototype.valueOf),l(j,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},132:function(t,n,r){var e=r(27)("meta"),o=r(15),i=r(10),u=r(8).f,a=0,c=Object.isExtensible||function(){return!0},s=!r(18)(function(){return c(Object.preventExtensions({}))}),f=function(t){u(t,e,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,e)){if(!c(t))return"F";if(!n)return"E";f(t)}return t[e].i},getWeak:function(t,n){if(!i(t,e)){if(!c(t))return!0;if(!n)return!1;f(t)}return t[e].w},onFreeze:function(t){return s&&l.NEED&&c(t)&&!i(t,e)&&f(t),t}}},133:function(t,n,r){var e=r(26),o=r(49),i=r(36);t.exports=function(t){var n=e(t),r=o.f;if(r)for(var u,a=r(t),c=i.f,s=0;a.length>s;)c.call(t,u=a[s++])&&n.push(u);return n}},134:function(t,n,r){var e=r(32);t.exports=Array.isArray||function(t){return"Array"==e(t)}},135:function(t,n,r){var e=r(16),o=r(98).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return u.slice()}}(t):o(e(t))}},136:function(t,n,r){r(62)("asyncIterator")},137:function(t,n,r){r(62)("observable")},138:function(t,n,r){t.exports={default:r(139),__esModule:!0}},139:function(t,n,r){r(140),t.exports=r(2).Object.setPrototypeOf},14:function(t,n){t.exports={}},140:function(t,n,r){var e=r(13);e(e.S,"Object",{setPrototypeOf:r(141).set})},141:function(t,n,r){var e=r(15),o=r(9),i=function(t,n){if(o(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{(e=r(46)(Function.call,r(99).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return i(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:i}},142:function(t,n,r){t.exports={default:r(143),__esModule:!0}},143:function(t,n,r){r(144);var e=r(2).Object;t.exports=function(t,n){return e.create(t,n)}},144:function(t,n,r){var e=r(13);e(e.S,"Object",{create:r(48)})},145:function(t,n,r){"use strict";var e=r(176),o=r(146),i=r(147);t.exports=function(){function t(t,n,r,e,u,a){a!==i&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function n(){return t}t.isRequired=t;var r={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:n,element:t,instanceOf:n,node:t,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n};return r.checkPropTypes=e,r.PropTypes=r,r}},146:function(t,n,r){"use strict";var e=function(t){};t.exports=function(t,n,r,o,i,u,a,c){if(e(n),!t){var s;if(void 0===n)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[r,o,i,u,a,c],l=0;(s=new Error(n.replace(/%s/g,function(){return f[l++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}}},147:function(t,n,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},149:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.YYYYMMDD=n.toSBFormat=void 0;var e,o=r(1),i=(e=o)&&e.__esModule?e:{default:e};function u(t){return(t<10?"0":"")+t}n.toSBFormat=function(t){if(!(t instanceof Date))throw new Error("Invalid Date object");return t.getUTCFullYear()+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+" "+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())},n.YYYYMMDD=function(t){return(0,i.default)(t).format("L")}},15:function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},157:function(t,n,r){"use strict";(function(t){t.browser||(t.browser=r(196))}).call(n,r(20))},16:function(t,n,r){var e=r(53),o=r(33);t.exports=function(t){return e(o(t))}},163:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isProductFetchedFromTaoBao=n.getProductListMap=n.getCartIdByProductListElem=n.getProductIdByProductLinkElem=n.getProductInfoElem=n.getProductLinkElem=n.redirectToDeepLink=n.getTaoBaoProductDeepLink=n.taoBaoProductHasCashback=void 0;var e,o=r(5),i=(e=o)&&e.__esModule?e:{default:e},u=r(206),a=r(45),c=r(43),s=r(108),f=r(149),l=r(63),h=r(0);var v=function(t,n){return t&&Object.prototype.hasOwnProperty.call(t,"results")&&Object.keys(t.results).length>0&&Object.prototype.hasOwnProperty.call(t.results,n)&&Array.isArray(t.results[n])&&t.results[n].length>0},p=function(t){var n=t.error_response;return n?Promise.reject({message:n.sub_code}):Promise.resolve(t)},d=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.DEFAULT_COUNTRY,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=r.method.replace(/^taobao\./,"").replace(/\./g,"_")+"_response",o=t.appKey[n],a=t.appSecret[n],c=t.adzoneId[n],s=(0,i.default)({},t.methods.common.params,r,{timestamp:(0,f.toSBFormat)(new Date),app_key:o,adzone_id:c});s.sign=function(t,n){var r="";return Object.keys(n).sort().forEach(function(t){var e=n[t];r+=t+e}),r=""+t+r+t,(0,u.MD5)(r).toString().toUpperCase()}(a,s);var v=new URL(t.url);Object.keys(s).forEach(function(t){var n=s[t];v.searchParams.set(t,n)});var d={method:t.httpMethod,headers:{"Content-Type":t.contentType},body:v.searchParams};return(0,l.fetchWithRetry)(t.url,d).then(function(t){return t.json()}).then(p).then(function(t){return t[e]}).catch(function(t){return Promise.reject({message:t.message})})},_=(n.taoBaoProductHasCashback=function(t,n,r){return d(r,n.toLowerCase(),(0,i.default)({},r.methods.getCashBackStatus.params,{num_iids:t})).then(function(t){var n=r.methods.getCashBackStatus.resultKey;return v(t,n)&&t.results[n][0]&&t.results[n][0].material_lib_type&&h.TAOBAO_MATERIAL_LIB_TYPE_HAS_CASHBACK.includes(t.results[n][0].material_lib_type)}).catch(function(t){return t.message!==r.methods.getCashBackStatus.errorCodes.noResult&&t.message!==r.methods.getCashBackStatus.errorCodes.rateLimitExceeded&&t.message!==r.methods.getCashBackStatus.errorCodes.internalError&&Promise.reject({message:t.message})})},n.getTaoBaoProductDeepLink=function(t,n,r){return d(r,n.toLowerCase(),(0,i.default)({},r.methods.getDeepLink.params,{num_iids:t})).then(function(t){var n=r.methods.getDeepLink.resultKey;return v(t,n)&&t.results[n][0].click_url?t.results[n][0].click_url:""}).catch(function(t){return Promise.reject({message:t.message})})},n.redirectToDeepLink=function(t,n,r){var e=t.getState(),o=(0,c.matchMerchant)(e,{url:n}),i=(0,s.getActivatedProductIdByTab)(e,{tabId:r});if(o&&o.isTaobao&&i){var u=(0,s.getTaoBaoSettings)(e).aiTaoBaoSearchPattern;if(!new RegExp(u).test(n))return!1;var f=new URL(n).searchParams.get("unid");if(!f)return!1;var l=e.taoBao.products[i];if(!l)return!1;if(l.activateState!==h.ACTIVATE_STATE_ACTIVATING)return!1;if(l.redirectedToDeepLink)return!1;if(!l.deepLink)return!1;t.dispatch((0,a.uiDeepLinkRedirect)({productId:i,tabId:r}));var v=new URL(l.deepLink);return v.searchParams.append("unid",f),window.location.replace(v.href),!0}return!1},n.getProductLinkElem=function(t,n){return t.querySelector(n)}),b=n.getProductInfoElem=function(t,n){return t.querySelector(n)},m=n.getProductIdByProductLinkElem=function(t){if(!t)return"";var n=t.getAttribute("href");return n.startsWith("//")&&(n="https:"+n),new URL(n).searchParams.get("id")||""},E=n.getCartIdByProductListElem=function(t){return t.split("_")[2].trim()};n.getProductListMap=function(t,n,r){return t.map(function(t){return{productList:t,productInfo:b(t,r),productId:m(_(t,n)),cartId:E(t.id)}})},n.isProductFetchedFromTaoBao=function(t){return!!(t&&Object.prototype.hasOwnProperty.call(t,"activateState")&&Object.prototype.hasOwnProperty.call(t,"hasCashback")&&Object.prototype.hasOwnProperty.call(t,"deepLink"))}},175:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.addDOMContentCompleteEventListener=function(t){"complete"!==document.readyState?window.addEventListener("load",function(){t()}):t()},n.addDOMContentLoadedEventListener=function(t){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){t()}):t()},n.createMutationObserver=function(t){var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return n?new n(function(n){n.forEach(function(n){t(n)})}):null}},177:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=s(r(5)),o=s(r(38));n.toggleTaoBaoSearchBox=function(){return{type:a.TAOBAO_TOGGLE_SEARCH_BOX}},n.uiToggleTaoBaoSearchBox=function(){return{type:a.TAOBAO_TOGGLE_SEARCH_BOX}},n.openTaoBaoNotifier=function(){return{type:a.TAOBAO_OPEN_NOTIFIER}},n.uiOpenTaoBaoNotifier=function(){return{type:a.TAOBAO_OPEN_NOTIFIER}},n.closeTaoBaoNotifier=function(){return{type:a.TAOBAO_CLOSE_NOTIFIER}},n.uiCloseTaoBaoNotifier=function(){return{type:a.TAOBAO_CLOSE_NOTIFIER}},n.closeTaoBaoConfirmationNotifier=function(){return{type:a.TAOBAO_CLOSE_CONFIRMATION_NOTIFIER}},n.uiCloseTaoBaoConfirmationNotifier=function(){return{type:a.TAOBAO_CLOSE_CONFIRMATION_NOTIFIER}},n.openTaoBaoConfirmationNotifier=function(){return{type:a.TAOBAO_OPEN_CONFIRMATION_NOTIFIER}},n.uiOpenTaoBaoConfirmationNotifier=function(){return{type:a.TAOBAO_OPEN_CONFIRMATION_NOTIFIER}},n.openTaoBaoApiDownNotifier=function(){return{type:a.TAOBAO_OPEN_API_DOWN_NOTIFIER}},n.uiOpenTaoBaoApiDownNotifier=function(){return{type:a.TAOBAO_OPEN_API_DOWN_NOTIFIER}},n.closeTaoBaoApiDownNotifier=function(){return{type:a.TAOBAO_CLOSE_API_DOWN_NOTIFIER}},n.uiCloseTaoBaoApiDownNotifier=function(){return{type:a.TAOBAO_CLOSE_API_DOWN_NOTIFIER}},n.fetchTaoBaoProductCashbackStatusSuccess=f,n.fetchTaoBaoProductCashbackStatus=function(t){var n=t.productId;return function(t,r){var e=r(),s=e.cc,l=(0,i.getTaoBaoSettings)(e),h=l.api;return(0,u.taoBaoProductHasCashback)(n,s,h).then(function(t){return t?Promise.all([t,(0,u.getTaoBaoProductDeepLink)(n,s,h)]):Promise.resolve([t,""])}).then(function(r){var e=(0,o.default)(r,2),i=e[0],u=e[1];t(f(n,i,u))}).catch(function(n){var r=n.message;t((0,c.apiError)({errorType:a.FETCH_TAOBAO_PRODUCT_CASHBACK_STATUS_ERROR,message:r}))})}},n.uiFetchTaoBaoProductCashbackStatus=function(t){return{type:a.FETCH_TAOBAO_PRODUCT_CASHBACK_STATUS,productId:t}},n.deactivateTaoBaoProduct=function(t){var n=t.productId;return{type:a.DEACTIVATE_TAOBAO_PRODUCT,payload:{productId:n}}},n.uiDeactivateTaoBaoProduct=function(t){return{type:a.DEACTIVATE_TAOBAO_PRODUCT,productId:t}},n.startActivateTaoBaoProduct=function(t){return{type:a.START_ACTIVATE_TAOBAO_PRODUCT,payload:{tabId:t.tabId,productId:t.productId}}},n.uiStartActivateTaoBaoProduct=function(t){return(0,e.default)({type:a.START_ACTIVATE_TAOBAO_PRODUCT},t)},n.setProductFromAiTaoBaoSearchToActivated=function(t){var n=t.productId;return{type:a.TAOBAO_SET_PRODUCT_FROM_AI_TAOBAO_SEARCH_TO_ACTIVATED,payload:{productId:n}}},n.uiSetProductFromAiTaoBaoSearchToActivated=function(t){return{type:a.TAOBAO_SET_PRODUCT_FROM_AI_TAOBAO_SEARCH_TO_ACTIVATED,productId:t}},n.activateTaoBaoProductFromSB=function(t){var n=t.productId;return{type:a.ACTIVATE_TAOBAO_PRODUCT_FROM_SB,payload:{productId:n}}},n.uiActivateTaoBaoProductFromSB=function(t){return{type:a.ACTIVATE_TAOBAO_PRODUCT_FROM_SB,productId:t}};var i=r(108),u=r(163),a=r(0),c=r(45);function s(t){return t&&t.__esModule?t:{default:t}}function f(t,n,r){return{type:a.FETCH_TAOBAO_PRODUCT_CASHBACK_STATUS_SUCCESS,payload:{productId:t,hasCashback:n,deepLink:r}}}},18:function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},19:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isYahooRedirectUrl=n.patchCouponStatsAPI=n.getTrendingCouponsAPI=n.getCouponReportIssuePage=n.getCouponCodesNotWorkPage=n.isSBHomePage=n.getHtmlParseServiceUrl=n.getCouponsByMerchantAPI=n.getDealsAPI=n.getEventTrackingAPI=n.getSettingsAPI=n.getMerchantsAPI=n.getRefreshTokenAPI=n.getAccountAPI=n.getTaobaoGuidePage=n.getLinkTaoBaoToActivatePage=n.getLoginToActivatePage=n.getFAQPage=n.getReferPage=n.getOverviewPage=n.getWithdrawPage=n.getLogoutPage=n.getLoginPage=n.getHomePage=n.getTaobaoActivatePage=n.getActivatePage=n.getUrlDomain=n.getHelpCenterFromCC=n.getExtensionStoreFromCC=n.getDomainFromCC=n.getCCFromDomain=n.listWebsiteLoginAPIPatterns=n.getHost=n.isSBPage=n.isLoginPage=n.isProductRedirectPage=n.isMerchantRedirectPage=n.isRedirectPage=void 0;var e=r(0),o=r(52);n.default=o;n.isRedirectPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY,n=arguments[1];return n.includes(o.SB_WEBSITE_XX[t]+"/redirect/alink")||n.includes(o.SB_WEBSITE_XX[t]+"/product/redirect/plink")},n.isMerchantRedirectPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return arguments[1].includes(o.SB_WEBSITE_XX[t]+"/redirect/alink")},n.isProductRedirectPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY,n=arguments[1];return n.includes(o.SB_WEBSITE_XX[t]+"/product/redirect/plink")||new URL(n).searchParams.get("storeId")},n.isLoginPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return arguments[1].includes(o.SB_WEBSITE_XX[t]+"/login")},n.isSBPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return arguments[1].includes(""+o.SB_WEBSITE_XX[t])};var i=n.getHost=function(t){return"https://"+((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{api:!0}).api?o.API_HOST_XX:o.SB_WEBSITE_XX)[function(t){return o.API_HOST_XX[t]?t:e.DEFAULT_COUNTRY}(t)]},u=(n.listWebsiteLoginAPIPatterns=function(){return Object.keys(o.SB_WEBSITE_XX).reduce(function(t,n){return t.push("*://"+o.SB_WEBSITE_XX[n]+"/account/login","*://"+o.SB_WEBSITE_XX[n]+"/account/authenticateWithFacebook")&&t},[])},n.getCCFromDomain=function(t){var n=t.split(".");return n[n.length-1].toUpperCase()},n.getDomainFromCC=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return o.SB_WEBSITE_XX[t]},n.getExtensionStoreFromCC=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return e.IS_FIREFOX?o.EXTENSION_STORES.FIREFOX:o.EXTENSION_STORES[t]},n.getHelpCenterFromCC=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return o.HELP_CENTER[t]},n.getUrlDomain=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(?:https?:\/\/)?(?:\w+:\/)?[^:?#/\s]*?([^.\s]+\.(?:[a-z]{2,}|co\.uk|org\.uk|ac\.uk|org\.au|com\.au))(?:[:?#/]|$)/gi.exec(t)},n.getActivatePage=function(t,n){var r=new URL(t);return r.searchParams.has("utm_medium")&&"be"!==r.searchParams.get("utm_medium")||r.searchParams.set("utm_medium",n),r.href}),a=n.getTaobaoActivatePage=function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.UTM_BE_TAOBAO_SEARCH,i=encodeURIComponent(r),u=new URL(t);return u.searchParams.set("storeId",n),u.searchParams.set("search",i),u.searchParams.set("utm_medium",o),u.toString()},c=n.getHomePage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return""+i(t,{api:!1})};n.getLoginPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t,{api:!1})+"/login"},n.getLogoutPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t,{api:!1})+"/logout"},n.getWithdrawPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t,{api:!1})+"/payment"},n.getOverviewPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t,{api:!1})+"/cashback"},n.getReferPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t,{api:!1})+"/referral/invite"},n.getFAQPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t,{api:!1})+"/cashback-button/how-it-works"},n.getLoginToActivatePage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY,n=arguments[1],r=arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(n&&r){var c=new URL(u(n,r)),s=""+c.pathname+c.search;o&&a&&(s+="&from_taobao");var f=encodeURIComponent(s);return i(t,{api:!1})+"/login?redirect="+f}return i(t,{api:!1})+"/login"},n.getLinkTaoBaoToActivatePage=function(t,n,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=e&&o?a(n,e,o,r):u(n,r),s=new URL(c),f=""+s.pathname+s.search,l=encodeURIComponent(f);return i(t,{api:!1})+"/taobao/link?redirect="+l},n.getTaobaoGuidePage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t,{api:!1})+"/taobao#guide"},n.getAccountAPI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t)+"/api/v2/accounts/me"},n.getRefreshTokenAPI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t)+"/members/me/refresh-jwt-token"},n.getMerchantsAPI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?new URL(i(t)+"/api/v2/stores"):new URL(i(t)+"/api/stores");return n.confirmation&&r.push("confirmation-urls"),n.disableReason&&r.push("cashback-disable-reasons"),n.metaInfo?r.push("store-meta-info"):n.top&&o.searchParams.set("top","true"),r.length>0&&o.searchParams.set("metadata",r.join(",")),o.toString()},n.getSettingsAPI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t)+"/api/settings"},n.getEventTrackingAPI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY,n=arguments[1];return n===e.EVENT_EXT_INSTALLED?i(t)+"/api/events/ext-installed":n===e.EVENT_EXT_PAGE_VISITED?i(t)+"/api/events/ext-page-visited":n===e.EVENT_EXT_NOTIFIER_PROMPT?i(t)+"/api/events/ext-notifier-prompt":n===e.EVENT_EXT_NOTIFIER_ACTIVATED_PROMPT?i(t)+"/api/events/ext-notifier-activated":n===e.EVENT_EXT_SEARCH?i(t)+"/api/events/ext-search":n===e.EVENT_EXT_CLICK?i(t)+"/api/events/ext-click":n===e.EVENT_EXT_REDIRECT?i(t)+"/api/events/ext-redirect":n===e.EVENT_EXT_LOGIN?i(t)+"/api/events/ext-login":n===e.EVENT_EXT_MENU_OPEN?i(t)+"/api/events/ext-menu-open":n===e.EVENT_EXT_UPDATED?i(t)+"/api/events/ext-updated":n===e.EVENT_EXT_SERP_VISITED?i(t)+"/api/events/ext-serp-view":n===e.EVENT_EXT_SERP_CLICKED?i(t)+"/api/events/ext-serp-click":n===e.EVENT_EXT_APPLY_COUPON_CODE?i(t)+"/api/events/ext-apply-coupon-code":n===e.EVENT_EXT_ERROR_OCCURED?i(t)+"/api/events/ext-error":n===e.EVENT_EXT_MANUAL_APPLY_COUPON_CODE?i(t)+"/api/events/ext-success-code":""},n.getDealsAPI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY,n=arguments[1];return isNaN(parseInt(n,10))?i(t)+"/deals?top=true":i(t)+"/deals?store_id="+n},n.getCouponsByMerchantAPI=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DEFAULT_COUNTRY;return i(n)+"/api/v2/coupons/merchant/"+t},n.getHtmlParseServiceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t)+"/api/parsers/html"},n.isSBHomePage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY,n=arguments[1],r=new URL(n),o=new URL(c(t));return r.href===o.href},n.getCouponCodesNotWorkPage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return o.SB_HELP_CENTER_COUPON_CODES_NOT_WORK_XX[t]},n.getCouponReportIssuePage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return o.SB_COUPONS_REPORT_ISSUE_XX[t]},n.getTrendingCouponsAPI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY;return i(t)+"/api/v1/coupons/trending-codes"},n.patchCouponStatsAPI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_COUNTRY,n=arguments[1];return i(t)+"/api/v1/coupons/"+n},n.isYahooRedirectUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!t&&/r\.search\.yahoo\.com/.test(t)}},2:function(t,n){var r=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},205:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i(r(7)),o=i(r(11));function i(t){return t&&t.__esModule?t:{default:t}}var u=function(t){return e.default.createElement("div",{style:{textAlign:"right"}},e.default.createElement("span",{className:"shopback-notification-close",onClick:t.onClick}))};u.propTypes={onClick:o.default.func.isRequired},n.default=u},21:function(t,n,r){"use strict";n.__esModule=!0,n.default=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},22:function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},23:function(t,n){t.exports=!0},24:function(t,n,r){"use strict";n.__esModule=!0;var e,o=r(97),i=(e=o)&&e.__esModule?e:{default:e};n.default=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":(0,i.default)(n))&&"function"!=typeof n?t:n}},241:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.renderContainer=n.unMountContainer=void 0;var e=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(7)),o=r(148),i=r(70),u=c(r(242)),a=c(r(64));function c(t){return t&&t.__esModule?t:{default:t}}var s=n.unMountContainer=function(t,n){(0,o.unmountComponentAtNode)(n),document.documentElement.removeChild(n),a.default.warn(t,"unmount container: "+n.id)};n.renderContainer=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,f=document.createElement("div");r&&(f.id=r),f.style="z-index: 2147483647 !important";document.documentElement.appendChild(f),a.default.info(t,"render container: "+r),(0,o.render)(e.createElement(i.Provider,{store:t},e.createElement(u.default,null,e.createElement(n,{url:window.location.href,unMount:function(){return s(t,f)},tabId:c}))),f)}},242:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=l(r(21)),o=l(r(24)),i=l(r(31)),u=l(r(25)),a=r(7),c=l(a),s=l(r(11)),f=r(0);function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function n(t){(0,e.default)(this,n);var r=(0,o.default)(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.state={hasError:!1},r}return(0,u.default)(n,t),(0,i.default)(n,null,[{key:"renderErrorView",value:function(){return c.default.createElement("div",{className:"shopback-error-desc"},c.default.createElement("h3",null,browser.i18n.getMessage("notifier_error_title")),c.default.createElement("p",null,browser.i18n.getMessage("notifier_error_description")))}}]),(0,i.default)(n,[{key:"componentDidCatch",value:function(t,n){this.setState({hasError:!0}),browser.runtime.sendMessage({errorMessage:t.message,extra:n,action:f.SENTRY_ERROR_LOGGING})}},{key:"render",value:function(){return this.state.hasError?c.default.cloneElement(this.props.children,{errorView:n.renderErrorView()}):this.props.children}}]),n}(a.Component);h.propTypes={children:s.default.any},h.defaultProps={children:null},n.default=h},25:function(t,n,r){"use strict";n.__esModule=!0;var e=u(r(138)),o=u(r(142)),i=u(r(97));function u(t){return t&&t.__esModule?t:{default:t}}n.default=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":(0,i.default)(n)));t.prototype=(0,o.default)(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(e.default?(0,e.default)(t,n):t.__proto__=n)}},26:function(t,n,r){var e=r(60),o=r(42);t.exports=Object.keys||function(t){return e(t,o)}},27:function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},28:function(t,n,r){"use strict";var e=r(88)(!0);r(54)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},29:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getActivatedMerchantInfo=n.p=n.v=n.d=n.isActivateFromPartnership=n.isActivated=n.getActivatedTimeByMerchant=n.findByExt=void 0;var e=r(17),o=function(t){return t.activation.byExt},i=function(t,n){return n.merchant},u=n.findByExt=function(t,n){return t.activation.byExt[n.merchantId]},a=(n.getActivatedTimeByMerchant=(0,e.createSelector)([i,o],function(t,n){return n[t.id]?n[t.id].activatedAt:null}),n.isActivated=(0,e.createSelector)([i,o],function(t,n){return!!t&&!(!n[t.id]||!n[t.id].activated)})),c=(n.isActivateFromPartnership=(0,e.createSelector)([i,o],function(t,n){return!!t&&!(!n[t.id]||void 0===n[t.id].partnershipId)}),n.d=(0,e.createSelector)([i,o],function(t,n){if(!t)return!1;var r=n[t.id];return!!(r&&r.disabled&&r.focusing)})),s=n.v=(0,e.createSelector)([i,o],function(t,n){return!!t&&!(!n[t.id]||!n[t.id].disabled)});n.p=(0,e.createSelector)([s,c],function(t,n){return t&&!n}),n.getActivatedMerchantInfo=(0,e.createSelector)([a,i,function(t){return t}],function(t,n,r){if(t)return u(r,{merchantId:n.id})})},3:function(t,n,r){var e=r(41)("wks"),o=r(27),i=r(4).Symbol,u="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=e},31:function(t,n,r){"use strict";n.__esModule=!0;var e,o=r(74),i=(e=o)&&e.__esModule?e:{default:e};n.default=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),(0,i.default)(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}()},32:function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},33:function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},34:function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},347:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.uiSetIconBadgeText=n.getTabOfContentScript=void 0,r(157);var e=r(0);n.getTabOfContentScript=function(){return browser.runtime.sendMessage({action:e.GET_TAB_OF_CONTENT_SCRIPT})},n.uiSetIconBadgeText=function(t){return browser.runtime.sendMessage({action:e.SET_ICON_BADGE_TEXT,totalCodes:t})}},35:function(t,n,r){var e=r(41)("keys"),o=r(27);t.exports=function(t){return e[t]||(e[t]=o(t))}},36:function(t,n){n.f={}.propertyIsEnumerable},37:function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},38:function(t,n,r){"use strict";n.__esModule=!0;var e=i(r(78)),o=i(r(90));function i(t){return t&&t.__esModule?t:{default:t}}n.default=function(){return function(t,n){if(Array.isArray(t))return t;if((0,e.default)(Object(t)))return function(t,n){var r=[],e=!0,i=!1,u=void 0;try{for(var a,c=(0,o.default)(t);!(e=(a=c.next()).done)&&(r.push(a.value),!n||r.length!==n);e=!0);}catch(t){i=!0,u=t}finally{try{!e&&c.return&&c.return()}finally{if(i)throw u}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},39:function(t,n,r){r(80);for(var e=r(4),o=r(12),i=r(14),u=r(3)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var s=a[c],f=e[s],l=f&&f.prototype;l&&!l[u]&&o(l,u,s),i[s]=i.Array}},4:function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},40:function(t,n,r){var e=r(8).f,o=r(10),i=r(3)("toStringTag");t.exports=function(t,n,r){t&&!o(t=r?t:t.prototype,i)&&e(t,i,{configurable:!0,value:n})}},41:function(t,n,r){var e=r(2),o=r(4),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,n){return i[t]||(i[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(23)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},42:function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},43:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getMerchantByAffiliateId=n.shouldFetchMerchants=n.getMerchantMetaHash=n.getMerchantOfSerpMap=n.merchantHasCashback=n.getStandDownNotifierTimerId=n.isReloadNecessaryMerchant=n.transformWithPartnership=n.mapReason=n._=n.findPartnershipMerchant=n.findMerchant=n.matchConfirmPage=n.isInConfirmPage=n.matchMerchant=n.findTaobaoRelatedMerchant=void 0;var e=s(r(5)),o=s(r(38)),i=r(17),u=r(0),a=r(29),c=r(19);function s(t){return t&&t.__esModule?t:{default:t}}var f=function(t){return t.merchants.all},l=function(t,n){return n.url},h=function(t,n){return n.id};n.findTaobaoRelatedMerchant=(0,i.createSelector)([f],function(t){return t.filter(function(t){return t.isTaobao})});var v=n.matchMerchant=(0,i.createSelector)([f,l,function(t,n){return(0,c.getUrlDomain)(n.url)}],function(t,n,r){if(r){var e=(0,o.default)(r,2),i=e[0],u=e[1],a=t.filter(function(t){return t.rx=t.url_pattern?new RegExp(t.url_pattern):null,(i.indexOf(t.url_domain)>=0||u.indexOf(t.url_domain)>=0)&&t.rx&&t.rx.test(n)});if(a.length)return c=a,s=(0,o.default)(c,1)[0],c.forEach(function(t){t.rx>s.rx&&(s=t)}),s}var c,s;return null}),p=n.isInConfirmPage=(0,i.createSelector)([function(t,n){return n.merchant},l],function(t,n){return!!t&&(t.metadata.confirmation_urls.length>0&&t.metadata.confirmation_urls.some(function(t){return new RegExp(t).test(n)}))}),d=(n.matchConfirmPage=(0,i.createSelector)([f,l],function(t,n){return t.find(function(t){return p({},{merchant:t,url:n})})}),n.findMerchant=(0,i.createSelector)([f,h],function(t,n){return t.find(function(t){return t.id===n})})),_=(n.findPartnershipMerchant=(0,i.createSelector)([f,h],function(t,n){return t.find(function(t){var r=Object.keys(t.partnership_stores);return r.length>0&&r.indexOf(""+n)>-1})}),n._=(0,i.createSelector)([function(t){return t},function(t,n){return n.referrer},function(t,n){return n.merchant}],function(t,n,r){var e=v(t,{url:n});return r.metadata.check_referrer&&!(0,c.isSBPage)(t.cc,n)&&!(e&&e.id===r.id)}),n.mapReason=(0,i.createSelector)([function(t){return t.settings.cashbackDisableReasons},function(t,n){return n.merchant}],function(t,n){return n?t[n.metadata.cashback_disable_reasons]||t[u.DEFAULT_DISABLE_REASON]:null}),n.transformWithPartnership=(0,i.createSelector)([function(t){return t},function(t,n){return n.merchant},a.isActivateFromPartnership,function(t,n){return n.activated},function(t,n){return n.disabled}],function(t,n,r,o,i){if(!n||!r)return n;if(o||i){var u=(0,a.findByExt)(t,{merchantId:n.id}),c=(0,e.default)({},n),s=n.partnership_stores[u.partnershipId];return c.activation_url=s.activation_url,c.cashback_amount=s.cashback_amount,c.cashbackHeader=s.cashbackHeader,c.reActivateX=s.reActivateX,c}return n}),n.isReloadNecessaryMerchant=(0,i.createSelector)([function(t,n){return n.merchant}],function(t){return t&&t.metadata.reload_tabs}),n.getStandDownNotifierTimerId=(0,i.createSelector)([d],function(t){return t&&t.standDownTimerId}),n.merchantHasCashback=(0,i.createSelector)([d],function(t){return!(!t||!t.cashback)&&!!parseFloat(t.cashback.amount)}));n.getMerchantOfSerpMap=(0,i.createSelector)([function(t,n){return n.links.filter(function(t){return!t.getAttribute("shopback-serp")})},function(t){return t}],function(t,n){var r=[];return t.forEach(function(t){var e=t.getAttribute("href");if((0,c.isYahooRedirectUrl)(e)){var o=new URL(e).pathname.split("/").find(function(t){return t.startsWith("RU=")});o&&(e=decodeURIComponent(o.split("=").pop()))}var i=v(n,{url:e});i&&!1!==i.isSerpEnabled&&_(n,{id:i.id})&&r.push({link:t,merchant:i})}),r}),n.getMerchantMetaHash=(0,i.createSelector)([f],function(t){var n={};return t.forEach(function(t){n[t.id]={logoUrl:t.logo_url,activationUrl:t.activation_url,hasCashBack:!!t.cashback&&!!parseFloat(t.cashback.amount)}}),n}),n.shouldFetchMerchants=(0,i.createSelector)([function(t){return t.merchants},function(t,n){return n.now}],function(t,n){if(!t)return!0;var r=t.fetchedAt;return"number"!=typeof r||n-r>u.REFETCH_MERCHANT_INTERVAL_MS}),n.getMerchantByAffiliateId=(0,i.createSelector)([f,function(t,n){return n.affiliateId}],function(t,n){return t.find(function(t){return t.affiliated_id===n})})},45:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.uiDirtyLoginFromMenu=n.dirtyLoginFromMenu=n.clearDirtyLoginFromMenu=n.cleanActivation=n.uiPopupOpen=n.popupOpen=n.uiDeepLinkRedirect=n.deepLinkRedirect=n.apiError=void 0;var e,o=r(5),i=(e=o)&&e.__esModule?e:{default:e},u=r(0);n.apiError=function(t){return{type:u.API_ERROR,payload:t}},n.deepLinkRedirect=function(t){var n=t.merchantId,r=t.productId,e=t.tabId;return{type:u.DEEP_LINK_REDIRECT,payload:{merchantId:n,productId:r,tabId:e}}},n.uiDeepLinkRedirect=function(t){var n=t.merchantId,r=t.productId,e=t.tabId;return{type:u.DEEP_LINK_REDIRECT,merchantId:n,productId:r,tabId:e}},n.popupOpen=function(){return{type:u.OPEN_POPUP_UI}},n.uiPopupOpen=function(){return{type:u.OPEN_POPUP_UI}},n.cleanActivation=function(){return{type:u.CLEAN_ACTIVATION}},n.clearDirtyLoginFromMenu=function(t){return{type:u.CLEAR_DIRTY_LOGIN_FROM_MENU,payload:{from:t}}},n.dirtyLoginFromMenu=function(t){return{type:u.DIRTY_LOGIN_FROM_MENU,payload:(0,i.default)({},t)}},n.uiDirtyLoginFromMenu=function(t){return{type:u.DIRTY_LOGIN_FROM_MENU,from:t}}},46:function(t,n,r){var e=r(65);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,o){return t.call(n,r,e,o)}}return function(){return t.apply(n,arguments)}}},47:function(t,n,r){var e=r(15);t.exports=function(t,n){if(!e(t))return t;var r,o;if(n&&"function"==typeof(r=t.toString)&&!e(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!e(o=r.call(t)))return o;if(!n&&"function"==typeof(r=t.toString)&&!e(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},48:function(t,n,r){var e=r(9),o=r(84),i=r(42),u=r(35)("IE_PROTO"),a=function(){},c=function(){var t,n=r(50)("iframe"),e=i.length;for(n.style.display="none",r(73).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;e--;)delete c.prototype[i[e]];return c()};t.exports=Object.create||function(t,n){var r;return null!==t?(a.prototype=e(t),r=new a,a.prototype=null,r[u]=t):r=c(),void 0===n?r:o(r,n)}},49:function(t,n){n.f=Object.getOwnPropertySymbols},5:function(t,n,r){"use strict";n.__esModule=!0;var e,o=r(93),i=(e=o)&&e.__esModule?e:{default:e};n.default=i.default||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t}},50:function(t,n,r){var e=r(15),o=r(4).document,i=e(o)&&e(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},51:function(t,n,r){var e=r(32),o=r(3)("toStringTag"),i="Arguments"==e(function(){return arguments}());t.exports=function(t){var n,r,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?r:i?e(n):"Object"==(u=e(n))&&"function"==typeof n.callee?"Arguments":u}},52:function(t,n){t.exports={URL_AFTER_INSTALL:"https://www.shopback.com/cashback-button/success",URL_AFTER_UNINSTALL:"https://www.shopback.com/uninstall",URL_COUNTRY_CODE:"https://api.shopback.com/location/countrycode",API_HOST_XX:{COM:"api.shopback.com",SG:"api.shopback.sg",MY:"api.shopback.my",PH:"api.shopback.ph",ID:"api.shopback.co.id",IN:"api.shopback.in",TW:"api.shopback.com.tw",AU:"api.shopback.com.au",TH:"api.myshopback.co.th"},SB_WEBSITE_XX:{COM:"www.shopback.com",SG:"www.shopback.sg",MY:"www.shopback.my",PH:"www.shopback.ph",ID:"www.shopback.co.id",IN:"www.shopback.in",TW:"www.shopback.com.tw",AU:"www.shopback.com.au",TH:"www.shopback.co.th"},EXTENSION_STORES:{COM:"https://chrome.google.com/webstore/detail/shopback-cashback-button/clomojagppekiladdknhnpjoihabjmnm",SG:"https://chrome.google.com/webstore/detail/shopback-cashback-button/hjngckebbndpdeeakdgohmcdnecidcjk",MY:"https://chrome.google.com/webstore/detail/shopback-cashback-button/fgobhpdfgjoognbahjpeabmlheajfpik",PH:"https://chrome.google.com/webstore/detail/shopback-cashback-button/ngeinbnbakgkpcmokhonplkllgbnohoo",ID:"https://chrome.google.com/webstore/detail/shopback-cashback-button/ambfhpcdfdlobjbckfbajgdoohfhaahn",TW:"https://chrome.google.com/webstore/detail/shopback-%E7%8F%BE%E9%87%91%E5%9B%9E%E9%A5%8B%E5%B0%8F%E5%B9%AB%E6%89%8B/djjjmdgomejlopjnccoejdhgjmiappap",AU:"https://chrome.google.com/webstore/detail/shopback-cashback-button/dlkceoecbkpgngncmlcbmcnedjkpihni",TH:"https://chrome.google.com/webstore/detail/shopback-cashback-button/ccbgpokbhaoahpebadnnjeoamielibki",FIREFOX:"https://addons.mozilla.org/en-US/firefox/addon/shopback-cashback-button"},HELP_CENTER:{COM:"https://shopback.zendesk.com/hc/en-us/articles/215540757",SG:"https://support.shopback.sg/hc/en-us/articles/115010365348",MY:"https://support.shopback.my/hc/en-us/articles/115010204007",PH:"https://support.shopback.ph/hc/en-us/articles/115010204547",ID:"https://support.shopback.co.id/hc/en-us/articles/115010369648",TW:"https://support.shopback.com.tw/hc/zh-tw/articles/360013698513",AU:"https://support.shopback.com.au/hc/en-us/articles/360001888848",TH:"https://support.shopback.co.th/hc/th/articles/360013913233"},SB_HELP_CENTER_COUPON_CODES_NOT_WORK_XX:{COM:"https://support.shopback.sg/hc/en-us/articles/360025371214",SG:"https://support.shopback.sg/hc/en-us/articles/360025371214",MY:"https://support.shopback.sg/hc/en-us/articles/360025371214",PH:"https://support.shopback.sg/hc/en-us/articles/360025371214",ID:"https://support.shopback.sg/hc/en-us/articles/360025371214",IN:"https://support.shopback.sg/hc/en-us/articles/360025371214",TW:"https://support.shopback.sg/hc/en-us/articles/360025371214",AU:"https://support.shopback.sg/hc/en-us/articles/360025371214",TH:"https://support.shopback.sg/hc/en-us/articles/360025371214"},SB_COUPONS_REPORT_ISSUE_XX:{COM:"https://docs.google.com/forms/d/e/1FAIpQLSfxFrimy14t7QlvhiaAwvhKXSt1RFPdKjtxKDu_HHNlQ-zHtg/viewform",SG:"https://docs.google.com/forms/d/e/1FAIpQLSfxFrimy14t7QlvhiaAwvhKXSt1RFPdKjtxKDu_HHNlQ-zHtg/viewform",MY:"https://docs.google.com/forms/d/e/1FAIpQLSfxFrimy14t7QlvhiaAwvhKXSt1RFPdKjtxKDu_HHNlQ-zHtg/viewform",PH:"https://docs.google.com/forms/d/e/1FAIpQLSfxFrimy14t7QlvhiaAwvhKXSt1RFPdKjtxKDu_HHNlQ-zHtg/viewform",ID:"https://docs.google.com/forms/d/e/1FAIpQLSfxFrimy14t7QlvhiaAwvhKXSt1RFPdKjtxKDu_HHNlQ-zHtg/viewform",IN:"https://docs.google.com/forms/d/e/1FAIpQLSfxFrimy14t7QlvhiaAwvhKXSt1RFPdKjtxKDu_HHNlQ-zHtg/viewform",TW:"https://docs.google.com/forms/d/e/1FAIpQLSfxFrimy14t7QlvhiaAwvhKXSt1RFPdKjtxKDu_HHNlQ-zHtg/viewform",AU:"https://docs.google.com/forms/d/e/1FAIpQLSfxFrimy14t7QlvhiaAwvhKXSt1RFPdKjtxKDu_HHNlQ-zHtg/viewform",TH:"https://docs.google.com/forms/d/e/1FAIpQLSfxFrimy14t7QlvhiaAwvhKXSt1RFPdKjtxKDu_HHNlQ-zHtg/viewform"},ACTIVATED_EXPIRED_MS:36e5,ACTIVATED_EXPIRED_MS_FOR_TAOBAO:864e5,PERMISSION_NOTIFIER_TTL:36e5,SENTRY_DSN:"https://5740ea62fe804eeaa16f0b7c55d9f521@sentry.io/1189626",SENTRY_SAMPLE_RATE:.2}},53:function(t,n,r){var e=r(32);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},54:function(t,n,r){"use strict";var e=r(23),o=r(13),i=r(59),u=r(12),a=r(14),c=r(83),s=r(40),f=r(87),l=r(3)("iterator"),h=!([].keys&&"next"in[].keys()),v=function(){return this};t.exports=function(t,n,r,p,d,_,b){c(r,n,p);var m,E,T,y=function(t){if(!h&&t in w)return w[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},O=n+" Iterator",g="values"==d,S=!1,w=t.prototype,C=w[l]||w["@@iterator"]||d&&w[d],k=C||y(d),N=d?g?y("entries"):k:void 0,I="Array"==n&&w.entries||C;if(I&&(T=f(I.call(new t)))!==Object.prototype&&T.next&&(s(T,O,!0),e||"function"==typeof T[l]||u(T,l,v)),g&&C&&"values"!==C.name&&(S=!0,k=function(){return C.call(this)}),e&&!b||!h&&!S&&w[l]||u(w,l,k),a[n]=k,a[O]=v,d)if(m={values:g?k:y("values"),keys:_?k:y("keys"),entries:N},b)for(E in m)E in w||i(w,E,m[E]);else o(o.P+o.F*(h||S),n,m);return m}},55:function(t,n,r){(function(n){var e=r(71),o="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{};function i(t){return void 0===t}function u(t){return"[object Object]"===Object.prototype.toString.call(t)}function a(t){return"[object String]"===Object.prototype.toString.call(t)}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(){try{return new ErrorEvent(""),!0}catch(t){return!1}}function f(){if(!("fetch"in o))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function l(t,n){var r,e;if(i(t.length))for(r in t)h(t,r)&&n.call(null,r,t[r]);else if(e=t.length)for(r=0;r<e;r++)n.call(null,r,t[r])}function h(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function v(t){for(var n,r=[],e=0,o=t.length;e<o;e++)a(n=t[e])?r.push(n.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):n&&n.source&&r.push(n.source);return new RegExp(r.join("|"),"i")}function p(t){var n,r,e,o,i,u=[];if(!t||!t.tagName)return"";if(u.push(t.tagName.toLowerCase()),t.id&&u.push("#"+t.id),(n=t.className)&&a(n))for(r=n.split(/\s+/),i=0;i<r.length;i++)u.push("."+r[i]);var c=["type","name","title","alt"];for(i=0;i<c.length;i++)e=c[i],(o=t.getAttribute(e))&&u.push("["+e+'="'+o+'"]');return u.join("")}function d(t,n){return!!(!!t^!!n)}function _(t,n){if(d(t,n))return!1;var r,e,o=t.frames,i=n.frames;if(o.length!==i.length)return!1;for(var u=0;u<o.length;u++)if(r=o[u],e=i[u],r.filename!==e.filename||r.lineno!==e.lineno||r.colno!==e.colno||r.function!==e.function)return!1;return!0}var b=3,m=51200,E=40;function T(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}function y(t){if("string"==typeof t)return t.length<=40?t:t.substr(0,39)+"";if("number"==typeof t||"boolean"==typeof t||void 0===t)return t;var n=Object.prototype.toString.call(t);return"[object Object]"===n?"[Object]":"[object Array]"===n?"[Array]":"[object Function]"===n?t.name?"[Function: "+t.name+"]":"[Function]":t}t.exports={isObject:function(t){return"object"==typeof t&&null!==t},isError:function(t){switch({}.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}},isErrorEvent:function(t){return s()&&"[object ErrorEvent]"==={}.toString.call(t)},isUndefined:i,isFunction:function(t){return"function"==typeof t},isPlainObject:u,isString:a,isArray:c,isEmptyObject:function(t){if(!u(t))return!1;for(var n in t)if(t.hasOwnProperty(n))return!1;return!0},supportsErrorEvent:s,supportsFetch:f,supportsReferrerPolicy:function(){if(!f())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(t){return!1}},supportsPromiseRejectionEvent:function(){return"function"==typeof PromiseRejectionEvent},wrappedCallback:function(t){return function(n,r){var e=t(n)||n;return r&&r(e)||e}},each:l,objectMerge:function(t,n){return n?(l(n,function(n,r){t[n]=r}),t):t},truncate:function(t,n){return!n||t.length<=n?t:t.substr(0,n)+""},objectFrozen:function(t){return!!Object.isFrozen&&Object.isFrozen(t)},hasKey:h,joinRegExp:v,urlencode:function(t){var n=[];return l(t,function(t,r){n.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}),n.join("&")},uuid4:function(){var t=o.crypto||o.msCrypto;if(!i(t)&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var n=t.toString(16);n.length<4;)n="0"+n;return n};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)})},htmlTreeAsString:function(t){for(var n,r=[],e=0,o=0,i=" > ".length;t&&e++<5&&!("html"===(n=p(t))||e>1&&o+r.length*i+n.length>=80);)r.push(n),o+=n.length,t=t.parentNode;return r.reverse().join(" > ")},htmlElementAsString:p,isSameException:function(t,n){return!d(t,n)&&(t=t.values[0],n=n.values[0],t.type===n.type&&t.value===n.value&&(r=t.stacktrace,e=n.stacktrace,(!i(r)||!i(e))&&_(t.stacktrace,n.stacktrace)));var r,e},isSameStacktrace:_,parseUrl:function(t){if("string"!=typeof t)return{};var n=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),r=n[6]||"",e=n[8]||"";return{protocol:n[2],host:n[4],path:n[5],relative:n[5]+r+e}},fill:function(t,n,r,e){if(null!=t){var o=t[n];t[n]=r(o),t[n].__raven__=!0,t[n].__orig__=o,e&&e.push([t,n,o])}},safeJoin:function(t,n){if(!c(t))return"";for(var r=[],e=0;e<t.length;e++)try{r.push(String(t[e]))}catch(t){r.push("[value cannot be serialized]")}return r.join(n)},serializeException:function t(n,r,o){if(!u(n))return n;o="number"!=typeof(r="number"!=typeof r?b:r)?m:o;var i=function t(n,r){return 0===r?y(n):u(n)?Object.keys(n).reduce(function(e,o){return e[o]=t(n[o],r-1),e},{}):Array.isArray(n)?n.map(function(n){return t(n,r-1)}):y(n)}(n,r);return T(e(i))>o?t(n,r-1):i},serializeKeysForMessage:function(t,n){if("number"==typeof t||"string"==typeof t)return t.toString();if(!Array.isArray(t))return"";if(0===(t=t.filter(function(t){return"string"==typeof t})).length)return"[object has no keys]";if(n="number"!=typeof n?E:n,t[0].length>=n)return t[0];for(var r=t.length;r>0;r--){var e=t.slice(0,r).join(", ");if(!(e.length>n))return r===t.length?e:e+""}return""},sanitize:function(t,n){if(!c(n)||c(n)&&0===n.length)return t;var r,o=v(n),i="********";try{r=JSON.parse(e(t))}catch(n){return t}return function t(n){return c(n)?n.map(function(n){return t(n)}):u(n)?Object.keys(n).reduce(function(r,e){return o.test(e)?r[e]=i:r[e]=t(n[e]),r},{}):n}(r)}}}).call(n,r(20))},58:function(t,n,r){t.exports=!r(6)&&!r(18)(function(){return 7!=Object.defineProperty(r(50)("div"),"a",{get:function(){return 7}}).a})},59:function(t,n,r){t.exports=r(12)},6:function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},60:function(t,n,r){var e=r(10),o=r(16),i=r(85)(!1),u=r(35)("IE_PROTO");t.exports=function(t,n){var r,a=o(t),c=0,s=[];for(r in a)r!=u&&e(a,r)&&s.push(r);for(;n.length>c;)e(a,r=n[c++])&&(~i(s,r)||s.push(r));return s}},61:function(t,n,r){n.f=r(3)},618:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=c(r(21)),o=c(r(31)),i=c(r(24)),u=c(r(25)),a=r(69);function c(t){return t&&t.__esModule?t:{default:t}}n.default=function(t){return function(t){function n(t){(0,e.default)(this,n);var r=(0,i.default)(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.getType=function(){return"Taobao Search Bar"},r.trackTaobaoSearch=r.trackTaobaoSearch.bind(r),r.trackCloseEvent=r.trackCloseEvent.bind(r),r.trackActivateEvent=r.trackActivateEvent.bind(r),r.trackTaoBaoCashbackNotifierActivateEvent=r.trackTaoBaoCashbackNotifierActivateEvent.bind(r),r.trackTaoBaoCashBackNotifierLoginEvent=r.trackTaoBaoCashBackNotifierLoginEvent.bind(r),r.trackTaobaoNavigatorPrompt=r.trackTaobaoNavigatorPrompt.bind(r),r.trackTaobaoCashbackNotifierPrompt=r.trackTaobaoCashbackNotifierPrompt.bind(r),r.trackTaoBaoConfirmationNotifierPrompt=r.trackTaoBaoConfirmationNotifierPrompt.bind(r),r.trackTaoBaoClickCloseSearchBar=r.trackTaoBaoClickCloseSearchBar.bind(r),r.trackTaoBaoSearchBarLoginEvent=r.trackTaoBaoSearchBarLoginEvent.bind(r),r}return(0,u.default)(n,t),(0,o.default)(n,[{key:"trackActivateEvent",value:function(){this.props.dispatch((0,a.uiTrackExtClick)(this.getType(),"Activate","","cta","","",this.getMerchant().id,window.location.href))}},{key:"trackTaoBaoCashbackNotifierActivateEvent",value:function(t){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Cashback Notifier","Activate","","cta","",t,this.getMerchant().id,window.location.href))}},{key:"trackTaoBaoCashBackNotifierLoginEvent",value:function(t){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Cashback Notifier Login","Log in to Activate","","cta","",t,this.getMerchant().id,window.location.href))}},{key:"trackTaoBaoLoginUserCloseNotifier",value:function(){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Cashback Notifier","Close","","cta","","",this.getMerchant().id,window.location.href))}},{key:"trackCloseEvent",value:function(){this.props.dispatch((0,a.uiTrackExtClick)(this.getType(),"Close","","cta","","",this.getMerchant().id,window.location.href))}},{key:"trackTaobaoSearch",value:function(t){this.props.dispatch((0,a.uiTrackExtSearch)(this.getType(),t,this.props.merchant.id,window.location.href))}},{key:"trackTaoBaoClickCloseSearchBar",value:function(){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Search Bar","Close","","cta","","",this.getMerchant().id,window.location.href))}},{key:"trackTaoBaoToggleToCloseSearchBar",value:function(){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Navigator","Search Bar","","Close","","",this.getMerchant().id,window.location.href))}},{key:"trackTaoBaoToggleToOpenSearchBar",value:function(){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Navigator","Search Bar","","Open","","",this.getMerchant().id,window.location.href))}},{key:"trackTaoBaoToggleToCloseStatusBar",value:function(){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Navigator","Cashback Status Button","","Close","","",this.getMerchant().id,window.location.href))}},{key:"trackTaoBaoToggleToOpenStatusBar",value:function(){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Navigator","Cashback Status Button","","Open","","",this.getMerchant().id,window.location.href))}},{key:"trackTaobaoNavigatorPrompt",value:function(){this.props.dispatch((0,a.uiTrackExtNotifierPrompt)("Taobao Navigator",this.props.merchant.id,window.location.href))}},{key:"trackTaobaoCashbackNotifierPrompt",value:function(){this.props.dispatch((0,a.uiTrackExtNotifierPrompt)("Taobao Cashback Notifier",this.props.merchant.id,window.location.href))}},{key:"trackTaoBaoConfirmationNotifierPrompt",value:function(){this.props.dispatch((0,a.uiTrackExtNotifierPrompt)("Taobao Confirmation Notifier",this.props.merchant.id,window.location.href))}},{key:"trackClickHelpEvent",value:function(){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Navigator","Guide","","","","",this.getMerchant().id,window.location.href))}},{key:"trackTaoBaoSearchBarLoginEvent",value:function(){this.props.dispatch((0,a.uiTrackExtClick)("Taobao Search Bar","Login","","cta","","",this.getMerchant().id,window.location.href))}}]),n}(t)}},62:function(t,n,r){var e=r(4),o=r(2),i=r(23),u=r(61),a=r(8).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||a(n,t,{value:u.f(t)})}},63:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fetchWithRetry=n.handleErrors=void 0;var e=r(113);n.handleErrors=function(t){if(!t.ok)throw(0,e.sendToSentry)(t),Error(t.statusText);return t},n.fetchWithRetry=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.retries||3,o=n.retryDelay||1e3,i=n.retryOnHttpStatus;i=i instanceof Array?i:[];var u=function(t,n){var r=n-1;setTimeout(function(){t(r)},o)};return new Promise(function(o,a){!function r(c){fetch(t,n).then(function(t){t.ok||t.redirected||(0,e.sendToSentry)(t),i&&-1===i.indexOf(t.status)?o(t):c>0?u(r,c):a(t)}).catch(function(t){(0,e.sendToSentry)(t),c>0?u(r,c):a(t)})}(r)})}},64:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.logger=void 0;var e,o=r(1),i=(e=o)&&e.__esModule?e:{default:e},u=r(110),a=r(0);var c=n.logger={info:function(t,n){if((0,u.isLoggerEnabled)(t.getState())){var r={message:n,timeStamp:(0,i.default)().format(i.default.HTML5_FMT.DATETIME_LOCAL_MS)};console.groupCollapsed(n,r.timeStamp),console.trace(),console.info(r),console.groupEnd()}},warn:function(t,n){if((0,u.isLoggerEnabled)(t.getState())){var r={message:n,timeStamp:(0,i.default)().format(i.default.HTML5_FMT.DATETIME_LOCAL_MS)};a.IS_FIREFOX?(console.groupCollapsed(n,r.timeStamp),console.trace(),console.warn(r),console.groupEnd()):console.warn(r)}},error:function(t,n){if((0,u.isLoggerEnabled)(t.getState())){var r={message:n,timeStamp:(0,i.default)().format(i.default.HTML5_FMT.DATETIME_LOCAL_MS)};console.error(r)}}};n.default=c},65:function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},66:function(t,n,r){var e=r(34),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},67:function(t,n,r){var e=r(51),o=r(3)("iterator"),i=r(14);t.exports=r(2).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[e(t)]}},69:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.uiTrackExtManualSuccessfulCode=n.trackExtManualSuccessfulCode=n.uiTrackExtErrorOccured=n.trackExtErrorOccured=n.uiTrackExtApplyCouponCode=n.trackExtApplyCouponCode=n.uiTrackExtSerpClicked=n.trackExtSerpClicked=n.uiTrackExtSerpVisited=n.trackExtSerpVisited=n.uiTrackExtMenuOpen=n.trackExtMenuOpen=n.uiTrackExtSwitchLogin=n.trackExtSwitchLogin=n.uiTrackExtRedirect=n.trackExtRedirect=n.uiTrackExtClick=n.trackExtClick=n.uiTrackExtSearch=n.trackExtSearch=n.uiTrackExtNotifierActivatedPrompt=n.trackExtNotifierActivatedPrompt=n.uiTrackExtNotifierPrompt=n.trackExtNotifierPrompt=n.uiTrackExtPageVisited=n.trackExtPageVisited=n.trackExtLogin=n.trackExtUpdated=n.trackExtInstalled=void 0;var e=u(r(105)),o=u(r(5)),i=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(0));function u(t){return t&&t.__esModule?t:{default:t}}n.trackExtInstalled=function(){return{type:i.EVENT_EXT_INSTALLED,payload:{message:"cute whale born"}}},n.trackExtUpdated=function(){return{type:i.EVENT_EXT_UPDATED,payload:{message:"little whale grow"}}},n.trackExtLogin=function(t,n,r,e){return{type:i.EVENT_EXT_LOGIN,payload:{location:t,countrySelected:n,status:r,url:e}}},n.trackExtPageVisited=function(t){return{type:i.EVENT_EXT_PAGE_VISITED,payload:(0,o.default)({},t)}},n.uiTrackExtPageVisited=function(t,n,r){return{type:i.EVENT_EXT_PAGE_VISITED,url:n,storeId:t,referrerUrl:r}};n.trackExtNotifierPrompt=function(t){var n=t.propertyType,r=(0,e.default)(t,["propertyType"]);return{type:i.EVENT_EXT_NOTIFIER_PROMPT,payload:(0,o.default)({},r,{type:n})}};n.uiTrackExtNotifierPrompt=function(t,n,r){return{type:i.EVENT_EXT_NOTIFIER_PROMPT,propertyType:t,storeId:n,url:r}},n.trackExtNotifierActivatedPrompt=function(t){return{type:i.EVENT_EXT_NOTIFIER_ACTIVATED_PROMPT,payload:(0,o.default)({},t)}},n.uiTrackExtNotifierActivatedPrompt=function(t,n){return{type:i.EVENT_EXT_NOTIFIER_ACTIVATED_PROMPT,storeId:t,url:n}},n.trackExtSearch=function(t){return{type:i.EVENT_EXT_SEARCH,payload:(0,o.default)({},t)}},n.uiTrackExtSearch=function(t,n,r,e){return{type:i.EVENT_EXT_SEARCH,storeId:r,url:e,location:t,searchTerm:n}},n.trackExtClick=function(t){return{type:i.EVENT_EXT_CLICK,payload:(0,o.default)({},t)}},n.uiTrackExtClick=function(t,n,r,e,u,a,c,s,f){var l={type:i.EVENT_EXT_CLICK,componentName:t,objectName:n,objectPosition:r,objectType:e,objectId:u,objectDestinationUrl:a,storeId:c,url:s};return f?(0,o.default)({},l,{applyingId:f}):l},n.trackExtRedirect=function(t){return{type:i.EVENT_EXT_REDIRECT,payload:(0,o.default)({},t)}},n.uiTrackExtRedirect=function(t){return(0,o.default)({type:i.EVENT_EXT_REDIRECT},t)},n.trackExtSwitchLogin=function(t){return{type:i.EVENT_EXT_LOGIN,payload:(0,o.default)({},t)}},n.uiTrackExtSwitchLogin=function(t,n,r,e){return{type:i.EVENT_EXT_LOGIN,location:t,countrySelected:n,status:r,url:e}},n.trackExtMenuOpen=function(t){return{type:i.EVENT_EXT_MENU_OPEN,payload:(0,o.default)({},t)}},n.uiTrackExtMenuOpen=function(t,n){return{type:i.EVENT_EXT_MENU_OPEN,storeId:t,url:n}},n.trackExtSerpVisited=function(t){return{type:i.EVENT_EXT_SERP_VISITED,payload:(0,o.default)({},t)}},n.uiTrackExtSerpVisited=function(t,n,r,e){return{type:i.EVENT_EXT_SERP_VISITED,serpDomain:t,url:n,searchKeyword:r,injectionCount:e}},n.trackExtSerpClicked=function(t){return{type:i.EVENT_EXT_SERP_CLICKED,payload:(0,o.default)({},t)}},n.uiTrackExtSerpClicked=function(t,n,r,e){return{type:i.EVENT_EXT_SERP_CLICKED,serpDomain:t,linkUrl:n,storeId:r,clickTarget:e}};n.trackExtApplyCouponCode=function(t){var n=t.applyType,r=(0,e.default)(t,["applyType"]);return{type:i.EVENT_EXT_APPLY_COUPON_CODE,payload:(0,o.default)({},r,{type:n})}};n.uiTrackExtApplyCouponCode=function(t){return(0,o.default)({type:i.EVENT_EXT_APPLY_COUPON_CODE},t)},n.trackExtErrorOccured=function(t){return{type:i.EVENT_EXT_ERROR_OCCURED,payload:(0,o.default)({},t)}},n.uiTrackExtErrorOccured=function(t,n,r,e,o,u,a){return{type:i.EVENT_EXT_ERROR_OCCURED,applyingId:t,location:n,errorCode:r,errorMessage:e,targetPattern:o,url:u,storeId:a}},n.trackExtManualSuccessfulCode=function(t,n){return{type:i.EVENT_EXT_MANUAL_APPLY_COUPON_CODE,payload:{storeId:t,successfulCode:n}}},n.uiTrackExtManualSuccessfulCode=function(t,n){return{type:i.EVENT_EXT_MANUAL_APPLY_COUPON_CODE,storeId:t,successfulCode:n}}},71:function(t,n){function r(t,n){for(var r=0;r<t.length;++r)if(t[r]===n)return r;return-1}function e(t,n){var e=[],o=[];return null==n&&(n=function(t,n){return e[0]===n?"[Circular ~]":"[Circular ~."+o.slice(0,r(e,n)).join(".")+"]"}),function(i,u){if(e.length>0){var a=r(e,this);~a?e.splice(a+1):e.push(this),~a?o.splice(a,1/0,i):o.push(i),~r(e,u)&&(u=n.call(this,i,u))}else e.push(u);return null==t?u instanceof Error?function(t){var n={stack:t.stack,message:t.message,name:t.name};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(u):u:t.call(this,i,u)}}(t.exports=function(t,n,r,o){return JSON.stringify(t,e(n,o),r)}).getSerialize=e},73:function(t,n,r){var e=r(4).document;t.exports=e&&e.documentElement},74:function(t,n,r){t.exports={default:r(106),__esModule:!0}},75:function(t,n,r){"use strict";n.__esModule=!0;var e,o=r(74),i=(e=o)&&e.__esModule?e:{default:e};n.default=function(t,n,r){return n in t?(0,i.default)(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}},78:function(t,n,r){t.exports={default:r(79),__esModule:!0}},79:function(t,n,r){r(39),r(28),t.exports=r(89)},8:function(t,n,r){var e=r(9),o=r(58),i=r(47),u=Object.defineProperty;n.f=r(6)?Object.defineProperty:function(t,n,r){if(e(t),n=i(n,!0),e(r),o)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},80:function(t,n,r){"use strict";var e=r(81),o=r(82),i=r(14),u=r(16);t.exports=r(54)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,o(1)):o(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),i.Arguments=i.Array,e("keys"),e("values"),e("entries")},81:function(t,n){t.exports=function(){}},82:function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},83:function(t,n,r){"use strict";var e=r(48),o=r(22),i=r(40),u={};r(12)(u,r(3)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:o(1,r)}),i(t,n+" Iterator")}},836:function(t,n,r){"use strict";var e=l(r(38)),o=r(156),i=r(163),u=r(347),a=r(175),c=r(241),s=l(r(64)),f=r(0);function l(t){return t&&t.__esModule?t:{default:t}}Promise.all([(0,u.getTabOfContentScript)(),(0,o.createUIStore)()]).then(function(t){var n=(0,e.default)(t,2),o=n[0],u=n[1],l=o.url,h=o.id;(0,i.redirectToDeepLink)(u,l,h)||(0,a.addDOMContentCompleteEventListener)(function(){var t=r(837).default;s.default.info(u,f.TAOBAO_NAVIGATOR_DIV_ID),(0,c.renderContainer)(u,t,f.TAOBAO_NAVIGATOR_DIV_ID,h)})})},837:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TaoBaoNavigator=void 0;var e=k(r(5)),o=k(r(21)),i=k(r(31)),u=k(r(24)),a=k(r(25)),c=r(7),s=k(c),f=k(r(11)),l=r(70),h=r(100),v=r(243),p=r(19),d=r(101),_=r(177),b=r(43),m=r(119),E=r(108),T=r(109),y=r(0),O=r(163),g=k(r(838)),S=k(r(839)),w=k(r(841)),C=k(r(618));function k(t){return t&&t.__esModule?t:{default:t}}r(842);var N=n.TaoBaoNavigator=function(t){function n(t){(0,o.default)(this,n);var r=(0,u.default)(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.state={in:!1,shouldNotifierMounted:!0},r.handleActivateProduct=r.handleActivateProduct.bind(r),r.handleActivateFromSearchBox=r.handleActivateFromSearchBox.bind(r),r.getMerchant=r.getMerchant.bind(r),r.renderNavigatorContent=r.renderNavigatorContent.bind(r),r.handleCloseSearchBox=r.handleCloseSearchBox.bind(r),r.handleCloseSearchBoxByActivate=r.handleCloseSearchBoxByActivate.bind(r),r.handleCloseNotifier=r.handleCloseNotifier.bind(r),r.handleCloseConfirmationNotifier=r.handleCloseConfirmationNotifier.bind(r),r.handleToggleNotifierIcon=r.handleToggleNotifierIcon.bind(r),r.handleOpenGuidePage=r.handleOpenGuidePage.bind(r),r.unmountNotifier=r.unmountNotifier.bind(r),r.mountNotifier=r.mountNotifier.bind(r),r.handleToggleSearchBox=r.handleToggleSearchBox.bind(r),r}return(0,a.default)(n,t),(0,i.default)(n,[{key:"componentWillMount",value:function(){var t=this.props,n=t.productId,r=t.shouldGetTaoBaoProductStatus,e=t.getTaoBaoProductCashbackStatus,o=t.openConfirmationNotifier,i=t.isProductPage,u=t.isConfirmationPage,a=t.productFromSearch,c=t.setProductFromAiTaoBaoSearchToActivated;u?(this.trackTaoBaoConfirmationNotifierPrompt(),o()):i&&(r?e(n):a&&c(n)),this.setState(function(){return{in:!0}})}},{key:"componentDidMount",value:function(){this.trackTaobaoNavigatorPrompt()}},{key:"getProduct",value:function(){var t=this.props.productId;return this.props.taoBao.products[t]}},{key:"getMerchant",value:function(){return this.props.merchant}},{key:"handleCloseSearchBox",value:function(){var t=this.props.toggleSearchBox;this.trackTaoBaoClickCloseSearchBar(),t()}},{key:"handleCloseSearchBoxByActivate",value:function(){var t=this.props.toggleSearchBox;this.trackCloseEvent(),t()}},{key:"handleCloseNotifier",value:function(){var t=this.props,n=t.closeNotifier;t.loggedIn&&this.trackTaoBaoLoginUserCloseNotifier(),n()}},{key:"handleCloseConfirmationNotifier",value:function(){(0,this.props.closeConfirmationNotifier)()}},{key:"handleToggleNotifierIcon",value:function(){var t=this.props,n=t.openNotifier,r=t.isNotifierOpened,e=t.isSearchBoxOpened;r&&!e&&this.state.shouldNotifierMounted?(this.trackTaoBaoToggleToCloseStatusBar(),this.unmountNotifier()):(this.trackTaoBaoToggleToOpenStatusBar(),n(),this.mountNotifier())}},{key:"unmountNotifier",value:function(){this.setState(function(){return{shouldNotifierMounted:!1}})}},{key:"mountNotifier",value:function(){this.setState(function(){return{shouldNotifierMounted:!0}})}},{key:"handleToggleSearchBox",value:function(){var t=this.props,n=t.isSearchBoxOpened,r=t.toggleSearchBox;n?this.trackTaoBaoToggleToCloseSearchBar():this.trackTaoBaoToggleToOpenSearchBar(),r()}},{key:"handleActivateFromSearchBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.props,r=n.merchant,e=n.loggedIn,o=n.activateFromSearchBox,i=n.cc,u=n.isTaoBaoLinkEnabled;this.trackTaobaoSearch(t),o({searchItem:t,merchantId:r.id,prevUrl:window.location.href,forceToSetReferrer:!1,from:"TaoBao Search Bar"});var a="";e?(this.trackActivateEvent(),a=u?(0,p.getLinkTaoBaoToActivatePage)(i,r.activation_url,y.UTM_BE_TAOBAO_SEARCH,r.id,t):(0,p.getTaobaoActivatePage)(r.activation_url,r.id,t)):(this.trackTaoBaoSearchBarLoginEvent(),a=(0,p.getLoginToActivatePage)(i,r.activation_url,y.UTM_BE_TAOBAO_LOGIN_SEARCHBAR,!0,u)),window.location.replace(a),this.handleCloseSearchBoxByActivate()}},{key:"handleActivateProduct",value:function(){var t=this.props,n=t.productId,r=t.loggedIn,e=t.activateProduct,o=t.merchant,i=t.cc,u=t.tabId,a=t.isTaoBaoLinkEnabled;e({productId:n,tabId:u});var c="";r?(c=a?(0,p.getLinkTaoBaoToActivatePage)(i,o.activation_url,y.UTM_BE_TAOBAO_CASHBACK_NOTIFIER):(0,p.getActivatePage)(o.activation_url,y.UTM_BE_TAOBAO_CASHBACK_NOTIFIER),this.trackTaoBaoCashbackNotifierActivateEvent(c)):(c=(0,p.getLoginToActivatePage)(i,o.activation_url,y.UTM_BE_TAOBAO_LOGIN_CASHBACK_NOTIFIER,!0,a),this.trackTaoBaoCashBackNotifierLoginEvent(c)),window.location.replace(c)}},{key:"handleOpenGuidePage",value:function(){var t=this.props.guideUrl;this.trackClickHelpEvent(),window.open(t)}},{key:"renderNavigatorContent",value:function(){var t=this.props,n=t.isProductPage,r=t.isSearchBoxOpened,e=t.isNotifierOpened,o=t.isConfirmationNotifierOpened,i=t.isConfirmationPage,u=t.loggedIn,a=t.merchant,c=t.taoBaoApiDown,f=this.getProduct(),l=f&&!!f.fromAiTaoBaoSearch,h=f&&!!f.activatedFromSB,v=y.CASHBACK_STATUS_UNAVAILABLE;c?v=y.CASHBACK_STATUS_TAOBAO_API_DOWN:l||(0,O.isProductFetchedFromTaoBao)(f)||h?f&&(f.activateState===y.ACTIVATE_STATE_ACTIVATED?v=y.CASHBACK_STATUS_ACTIVATED:f.hasCashback&&(v=y.CASHBACK_STATUS_AVAILABLE)):v=y.CASHBACK_STATUS_FETCHING;var p="taobao-navigator-indicator-"+v,d="taobao-navigator-search "+(r?"item-selected":""),_=s.default.createElement(g.default,{key:"taoBao_search_box",isLoggedIn:u,isSearchBoxOpened:r,onSearch:this.handleActivateFromSearchBox,onClose:this.handleCloseSearchBox}),b=e&&!r&&n&&this.state.shouldNotifierMounted,m=s.default.createElement(S.default,{key:"taoBao_notifier",shouldNotifierDisplay:b,isLoggedIn:u,onClose:this.handleCloseNotifier,activateProduct:this.handleActivateProduct,cashbackStatus:v,activateDesc:a.x,merchant:a}),E=s.default.createElement(w.default,{key:"taoBao_confirmation_notifier",isConfirmationNotifierOpened:o,onClose:this.handleCloseConfirmationNotifier,isConfirmationPage:i});return s.default.createElement("div",null,_,m,E,s.default.createElement("div",{className:"taobao-navigator-btns"},s.default.createElement("div",{className:"taobao-navigator-logo"}),s.default.createElement("div",{className:"taobao-navigator-btns-container"},n&&s.default.createElement("div",{className:p,onClick:this.handleToggleNotifierIcon}),s.default.createElement("div",{className:d,onClick:this.handleToggleSearchBox}),s.default.createElement("div",{className:"taobao-navigator-help",onClick:this.handleOpenGuidePage}))))}},{key:"render",value:function(){var t=this;return this.props.display?s.default.createElement(v.Transition,{in:this.state.in,timeout:500},function(r){return s.default.createElement("div",{className:"shopback-taobao-navigator",style:(0,e.default)({},n.defaultStyle,n.defaultTransitionStyles[r])},s.default.createElement("table",null,s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",{className:"taobao-navigator-container"},t.renderNavigatorContent())))))}):null}}]),n}((0,C.default)(c.Component));N.defaultStyle={transition:"opacity 500ms ease-in-out",opacity:0,top:"-20px"},N.defaultTransitionStyles={entered:{opacity:1,top:"10px"}},N.propTypes={url:f.default.string.isRequired,tabId:f.default.number.isRequired,activateProduct:f.default.func.isRequired,activateFromSearchBox:f.default.func.isRequired,loggedIn:f.default.bool.isRequired,merchant:f.default.object,cc:f.default.string.isRequired,taoBao:f.default.object.isRequired,getTaoBaoProductCashbackStatus:f.default.func.isRequired,setProductFromAiTaoBaoSearchToActivated:f.default.func.isRequired,unMount:f.default.func.isRequired,dispatch:f.default.func.isRequired,isProductPage:f.default.bool.isRequired,isConfirmationPage:f.default.bool.isRequired,productId:f.default.string.isRequired,shouldGetTaoBaoProductStatus:f.default.bool.isRequired,urlHasAliTrackParam:f.default.bool.isRequired,productFromSearch:f.default.bool.isRequired,isSearchBoxOpened:f.default.bool.isRequired,isNotifierOpened:f.default.bool.isRequired,isConfirmationNotifierOpened:f.default.bool.isRequired,taoBaoApiDown:f.default.bool.isRequired,toggleSearchBox:f.default.func.isRequired,openNotifier:f.default.func.isRequired,closeNotifier:f.default.func.isRequired,openConfirmationNotifier:f.default.func.isRequired,closeConfirmationNotifier:f.default.func.isRequired,display:f.default.bool.isRequired,guideUrl:f.default.string.isRequired,isTaoBaoLinkEnabled:f.default.bool},N.defaultProps={merchant:null,isTaoBaoLinkEnabled:!1},n.default=(0,l.connect)(function(t,n){var r=n.url,e=document.referrer,o=(0,b.matchMerchant)(t,n),i=(0,b.isInConfirmPage)(null,{merchant:o,url:r}),u=(0,E.isTaoBaoProductPage)(t,{url:r}),a=(0,E.getTaoBaoProductIdByUrl)(null,{url:r}),c=(0,E.shouldFetchTaoBaoProductCashbackStatus)(t,{url:r,referrer:e}),s=(0,E.urlContainsAliTrackParam)(t,{url:r}),f=(0,E.isProductActivatedByAiTaoBaoSearch)(t,{url:r,referrer:e}),l=(0,E.getTaoBaoSettings)(t),h=(0,T.taoBaoLinkEnabled)(t);return{merchant:o,isConfirmationPage:i,cc:t.cc,loggedIn:(0,m.isLoggedIn)(t),taoBao:t.taoBao,productId:a,shouldGetTaoBaoProductStatus:c,urlHasAliTrackParam:s,productFromSearch:f,isProductPage:u,isSearchBoxOpened:(0,E.isTaoBaoSearchBoxOpened)(t),display:(0,E.shouldDisplay)(null,{merchant:o}),isNotifierOpened:(0,E.isTaoBaoNotifierOpened)(t),isConfirmationNotifierOpened:(0,E.isTaoBaoConfirmationNotifierOpened)(t),taoBaoApiDown:(0,E.isTaoBaoApiDown)(t),guideUrl:l.guideUrls[t.cc.toLowerCase()],isTaoBaoLinkEnabled:h}},function(t){return(0,e.default)({},(0,h.bindActionCreators)({setProductFromAiTaoBaoSearchToActivated:_.uiSetProductFromAiTaoBaoSearchToActivated,getTaoBaoProductCashbackStatus:_.uiFetchTaoBaoProductCashbackStatus,activateProduct:_.uiStartActivateTaoBaoProduct,activateFromSearchBox:d.uiStartActivate,toggleSearchBox:_.uiToggleTaoBaoSearchBox,openNotifier:_.uiOpenTaoBaoNotifier,closeNotifier:_.uiCloseTaoBaoNotifier,openConfirmationNotifier:_.uiOpenTaoBaoConfirmationNotifier,closeConfirmationNotifier:_.uiCloseTaoBaoConfirmationNotifier},t),{dispatch:t})})(N)},838:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=l(r(21)),o=l(r(31)),i=l(r(24)),u=l(r(25)),a=r(7),c=l(a),s=l(r(11)),f=l(r(205));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function n(t){(0,e.default)(this,n);var r=(0,i.default)(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.state={searchItem:""},r.handleInputText=r.handleInputText.bind(r),r.handleKeyPress=r.handleKeyPress.bind(r),r}return(0,u.default)(n,t),(0,o.default)(n,[{key:"handleInputText",value:function(t){var n=t.target.value;this.setState(function(){return{searchItem:n}})}},{key:"handleKeyPress",value:function(t){"Enter"===t.key&&this.props.onSearch(this.state.searchItem)}},{key:"render",value:function(){var t=this;if(!this.props.isSearchBoxOpened)return null;return c.default.createElement("div",{className:"taobao-navigator-search-box"},c.default.createElement("div",{className:"taobao-search-box-title"},browser.i18n.getMessage("taobao_search_title")),this.props.isLoggedIn?c.default.createElement("div",{className:"taobao-search-box-form"},c.default.createElement("input",{type:"text",placeholder:browser.i18n.getMessage("taobao_search_placeholder"),className:"taobao-search-box-input",value:this.state.searchItem,onChange:this.handleInputText,onKeyPress:this.handleKeyPress}),c.default.createElement("span",{className:"taobao-search-box-button",onClick:function(){return t.props.onSearch(t.state.searchItem)}})):c.default.createElement("div",{className:"taobao-search-box-login-link"},c.default.createElement("span",{className:"taobao-search-box-login-desc",onClick:function(){return t.props.onSearch(t.state.searchItem)}},browser.i18n.getMessage("taobao_search_login"))),c.default.createElement(f.default,{onClick:this.props.onClose}))}}]),n}(a.Component);h.propTypes={isSearchBoxOpened:s.default.bool.isRequired,isLoggedIn:s.default.bool.isRequired,onSearch:s.default.func.isRequired,onClose:s.default.func.isRequired},n.default=h},839:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=b(r(5)),o=b(r(21)),i=b(r(31)),u=b(r(24)),a=b(r(25)),c=r(7),s=b(c),f=r(70),l=r(100),h=b(r(11)),v=b(r(205)),p=r(0),d=b(r(618)),_=b(r(840));function b(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function n(){return(0,o.default)(this,n),(0,u.default)(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return(0,a.default)(n,t),(0,i.default)(n,[{key:"componentDidMount",value:function(){this.props.shouldNotifierDisplay&&this.trackTaobaoCashbackNotifierPrompt()}},{key:"componentDidUpdate",value:function(t){!t.shouldNotifierDisplay&&this.props.shouldNotifierDisplay&&this.trackTaobaoCashbackNotifierPrompt()}},{key:"render",value:function(){var t=this.props,n=t.shouldNotifierDisplay,r=t.cashbackStatus,e=t.isLoggedIn,o=t.activateProduct,i=t.onClose,u=t.activateDesc;if(!n)return null;if(r===p.CASHBACK_STATUS_TAOBAO_API_DOWN)return s.default.createElement(_.default,{onClose:i});var a="taobao-notifier-icon cashback-"+r,c="taobao-notifier-content cashback-"+r,f=browser.i18n.getMessage("taobao_notifier_cashback_fetching"),l=null;if(r===p.CASHBACK_STATUS_AVAILABLE){var h=u,d="taobao-notifier-activate-button",b="taobao-notifier-activate-desc";f=browser.i18n.getMessage("taobao_notifier_cashback_available"),e||(d="taobao-notifier-login-button",b="taobao-notifier-login-desc",h=browser.i18n.getMessage("taobao_notifier_cashback_available_login")),l=s.default.createElement("div",{className:d,onClick:o},s.default.createElement("span",{className:b},h))}else r===p.CASHBACK_STATUS_ACTIVATED?(f=browser.i18n.getMessage("taobao_notifier_cashback_activated_desc"),l=s.default.createElement("div",{className:"taobao-notifier-activated-button"},s.default.createElement("div",{className:"taobao-notifier-activated-check"}),s.default.createElement("div",{className:"taobao-notifier-activated-desc"},browser.i18n.getMessage("taobao_notifier_cashback_activated")))):r===p.CASHBACK_STATUS_UNAVAILABLE&&(f=browser.i18n.getMessage("taobao_notifier_cashback_unavailable"));return s.default.createElement("div",{className:"taobao-notifier"},s.default.createElement("div",{className:a}),s.default.createElement("div",{className:c},s.default.createElement("div",{className:"taobao-notifier-desc"},f),l),s.default.createElement(v.default,{onClick:i}))}}]),n}((0,d.default)(c.Component));m.propTypes={shouldNotifierDisplay:h.default.bool.isRequired,isLoggedIn:h.default.bool.isRequired,onClose:h.default.func.isRequired,activateProduct:h.default.func.isRequired,cashbackStatus:h.default.string.isRequired,activateDesc:h.default.string.isRequired,merchant:h.default.object.isRequired},n.default=(0,f.connect)(null,function(t){return(0,e.default)({},(0,l.bindActionCreators)({},t),{dispatch:t})})(m)},84:function(t,n,r){var e=r(8),o=r(9),i=r(26);t.exports=r(6)?Object.defineProperties:function(t,n){o(t);for(var r,u=i(n),a=u.length,c=0;a>c;)e.f(t,r=u[c++],n[r]);return t}},840:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=u(r(7)),o=u(r(11)),i=u(r(205));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(t){var n=t.onClose;return e.default.createElement("div",{className:"taobao-api-down-notifier"},e.default.createElement("div",{className:"taobao-api-down-notifier-icon"}),e.default.createElement("div",{className:"taobao-api-down-notifier-content"},e.default.createElement("div",{className:"taobao-api-down-notifier-title"},browser.i18n.getMessage("taobao_api_down_title")),e.default.createElement("div",{className:"taobao-api-down-notifier-desc"},browser.i18n.getMessage("taobao_api_down_desc"))),e.default.createElement("div",{className:"taobao-api-down-notifier-button",onClick:n},browser.i18n.getMessage("taobao_api_down_button")),e.default.createElement(i.default,{onClick:n}))};a.propTypes={onClose:o.default.func.isRequired},n.default=a},841:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=u(r(7)),o=u(r(11)),i=u(r(205));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(t){var n=t.isConfirmationNotifierOpened,r=t.isConfirmationPage,o=t.onClose;return n&&r?e.default.createElement("div",{className:"taobao-confirmaion-notifier"},e.default.createElement("div",{className:"taobao-confirmaion-notifier-icon"}),e.default.createElement("div",{className:"taobao-confirmaion-notifier-content"},e.default.createElement("div",{className:"taobao-confirmaion-notifier-title"},browser.i18n.getMessage("taobao_confirmation_notifier_title")),e.default.createElement("div",{className:"taobao-confirmaion-notifier-desc"},browser.i18n.getMessage("taobao_confirmation_notifier_desc"))),e.default.createElement("div",{className:"taobao-confirmaion-notifier-button",onClick:o},browser.i18n.getMessage("taobao_confirmation_notifier_button")),e.default.createElement(i.default,{onClick:o})):null};a.propTypes={isConfirmationNotifierOpened:o.default.bool.isRequired,isConfirmationPage:o.default.bool.isRequired,onClose:o.default.func.isRequired},n.default=a},842:function(t,n){},85:function(t,n,r){var e=r(16),o=r(66),i=r(86);t.exports=function(t){return function(n,r,u){var a,c=e(n),s=o(c.length),f=i(u,s);if(t&&r!=r){for(;s>f;)if((a=c[f++])!=a)return!0}else for(;s>f;f++)if((t||f in c)&&c[f]===r)return t||f||0;return!t&&-1}}},86:function(t,n,r){var e=r(34),o=Math.max,i=Math.min;t.exports=function(t,n){return(t=e(t))<0?o(t+n,0):i(t,n)}},87:function(t,n,r){var e=r(10),o=r(37),i=r(35)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),e(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},88:function(t,n,r){var e=r(34),o=r(33);t.exports=function(t){return function(n,r){var i,u,a=String(o(n)),c=e(r),s=a.length;return c<0||c>=s?t?"":void 0:(i=a.charCodeAt(c))<55296||i>56319||c+1===s||(u=a.charCodeAt(c+1))<56320||u>57343?t?a.charAt(c):i:t?a.slice(c,c+2):u-56320+(i-55296<<10)+65536}}},89:function(t,n,r){var e=r(51),o=r(3)("iterator"),i=r(14);t.exports=r(2).isIterable=function(t){var n=Object(t);return void 0!==n[o]||"@@iterator"in n||i.hasOwnProperty(e(n))}},9:function(t,n,r){var e=r(15);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},90:function(t,n,r){t.exports={default:r(91),__esModule:!0}},91:function(t,n,r){r(39),r(28),t.exports=r(92)},92:function(t,n,r){var e=r(9),o=r(67);t.exports=r(2).getIterator=function(t){var n=o(t);if("function"!=typeof n)throw TypeError(t+" is not iterable!");return e(n.call(t))}},93:function(t,n,r){t.exports={default:r(94),__esModule:!0}},94:function(t,n,r){r(95),t.exports=r(2).Object.assign},95:function(t,n,r){var e=r(13);e(e.S+e.F,"Object",{assign:r(96)})},96:function(t,n,r){"use strict";var e=r(6),o=r(26),i=r(49),u=r(36),a=r(37),c=r(53),s=Object.assign;t.exports=!s||r(18)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=s({},t)[r]||Object.keys(s({},n)).join("")!=e})?function(t,n){for(var r=a(t),s=arguments.length,f=1,l=i.f,h=u.f;s>f;)for(var v,p=c(arguments[f++]),d=l?o(p).concat(l(p)):o(p),_=d.length,b=0;_>b;)v=d[b++],e&&!h.call(p,v)||(r[v]=p[v]);return r}:s},97:function(t,n,r){"use strict";n.__esModule=!0;var e=u(r(127)),o=u(r(129)),i="function"==typeof o.default&&"symbol"==typeof e.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};function u(t){return t&&t.__esModule?t:{default:t}}n.default="function"==typeof o.default&&"symbol"===i(e.default)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":i(t)}},98:function(t,n,r){var e=r(60),o=r(42).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,o)}},99:function(t,n,r){var e=r(36),o=r(22),i=r(16),u=r(47),a=r(10),c=r(58),s=Object.getOwnPropertyDescriptor;n.f=r(6)?s:function(t,n){if(t=i(t),n=u(n,!0),c)try{return s(t,n)}catch(t){}if(a(t,n))return o(!e.f.call(t,n),t[n])}}},[836]);